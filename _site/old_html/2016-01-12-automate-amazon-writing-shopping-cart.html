<i>This post is seventh in a series of nine. Need to go <a href="/2015/12/next-week-automating-amazon-how-i-am.html" target="_blank">back to the beginning</a>?</i><br><br>Finally! We have the testing framework written!<br /><br />Now it is time to write a simple test to check to see how we could develop some tests to use this framework.<br /><br />Let's call our test method in the PurchaseOrderTest class "test_CreatePurchaseForSingleProduct". Our test can be:<br /><br /><blockquote class="tr_bq">1) Go to the Product page, and check the price of a product, such as the mass market edition of the Hitchhiker's Guide to the Galaxy &nbsp;</blockquote><blockquote class="tr_bq">2) Add the Product to an empty Shopping Cart&nbsp;</blockquote><blockquote class="tr_bq">3) Verify the price in the Shopping Cart Review page is the same as the product.</blockquote><br /><a name='more'></a><br />To write our first ever test of the ShoppingCart Review Page, we have had a lot of setup to do. Luckily, most of it is already written for the previous six blog entries. We have:<br /><br /><ul><li>Declare the test product to be a single book, the mass market edition of the first book in the Hitchhiker's Guide to the Galaxy. &nbsp;( <a href="/2016/01/automate-amazon-productenums-and.html" target="_blank">review</a> )&nbsp;</li><li>Grab the username and password to login.&nbsp;</li><li>Instantiate the OrdersActions class so we can process the order with methods we set up in the class.&nbsp;(&nbsp;<a href="https://www.blogger.com/2015/12/automate-amazon-writing-sign-in-test.html" target="_blank">review</a>&nbsp;)</li><li>We are going to instantiate the page object called the ShoppingCartReviewPage, which will be designed below.&nbsp;</li><li>We use the methods we wrote in the OrderActions page ( <a href="/2015/12/automate-amazon-writing-sign-in-test.html" target="_blank">review</a> ) to initialize the Login, logging out if we have to. ( <a href="https://www.blogger.com/2016/01/automate-amazon-initializing-login-and.html" target="_blank">review</a> )</li><li>We navigate to the Home Page and and Login as the username and password. ( <a href="/2015/12/automate-amazon-writing-sign-in-test.html" target="_blank">review</a> )</li><li>We initialize the cart to remove any previous test products from the shopping cart. ( <a href="/2016/01/automate-amazon-initializing-login-and.html" target="_blank">review</a> )</li><li>We grab all data shown on the product page for our test product and load up the product object.&nbsp;(&nbsp;<a href="https://www.blogger.com/2016/01/automate-amazon-productenums-and.html" target="_blank">review</a>&nbsp;)&nbsp;</li><li>We add this test product, a test book, to the Shopping Cart Review page, as shown below.&nbsp;</li></ul><div>Elaborating on our three part test, our test can:</div><div><ul><li>Get the actual cart subtotal price shown in the Shopping Cart Review page.&nbsp;</li><li>Retrieve the price stored from the book's product page.&nbsp;</li><li>Since I like pretty output in my logs, we are going to feed the actual and expected results and see if it matches with a (PASS) or (FAIL).&nbsp;</li><li>And finally, we are going to assert that the actual subtotal price in the cart matches what is expected, as shown below.</li></ul><div>It's a heck of a lot of setup for one small assertion statement. The payoff will be in the next blog entry where I will be talking about testing multiple products and the tests running in parallel.&nbsp;</div></div><br /><h3>What our Directory Structure Will Look Like</h3><br />For this blog entry, we will be expanding upon the what we already had, so the directory structure will remain the same, except for a new page object called ShoppingCartReviewPage.<br /><br /><b>src/test/java</b><br /><ul><li>actions</li><ul><li>OrderActions</li></ul><li>base</li><ul><li>LoadProperties</li></ul><li>enums</li><ul><li>Products</li><li>Url</li></ul><li>pages</li><ul><li>HomePage</li><li>SignInPage</li><li>ProductPage</li><li>ShoppingCartPage</li><li>ShoppingCartReviewPage</li></ul><li>pojo</li><ul><li>Book</li></ul><li>properties</li><ul><li>user.properties</li></ul><li>testcases</li><ul><li>PurchaseOrderTest</li></ul><li>utils</li><ul><li>CommonUtils</li><li>DriverUtils</li></ul></ul><h3>The ShoppingCartReviewPage</h3><div>Remember that our test product we set up in our test is: <br /><pre style="background-image: URL(http://2.bp.blogspot.com/_z5ltvMQPaa8/SjJXr_U2YBI/AAAAAAAAAAM/46OqEP32CJ8/s320/codebg.gif); background: #f0f0f0; border: 1px dashed #CCCCCC; color: black; font-family: arial; font-size: 12px; height: auto; line-height: 20px; overflow: auto; padding: 0px; text-align: left; width: 99%;"><code style="color: black; word-wrap: normal;"> Products testBook = Products.HITCHHIKERS_GUIDE;  <br /></code></pre><br /><h4>Navigating to the Page</h4><br />Getting to what I have dubbed the "Shopping Cart Review Page" is easy. All you need to do is:<br /><br /><b>Go to the page of the product</b> at <a href="http://www.amazon.com/Hitchhikers-Guide-Galaxy-Douglas-Adams/dp/0345391802/">http://www.amazon.com/Hitchhikers-Guide-Galaxy-Douglas-Adams/dp/0345391802/</a><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-1WKTSWJhm7U/VpBxeLV2r-I/AAAAAAAAK1k/cpeZ7HZgAaQ/s1600/HitchProduct.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="252" src="https://3.bp.blogspot.com/-1WKTSWJhm7U/VpBxeLV2r-I/AAAAAAAAK1k/cpeZ7HZgAaQ/s400/HitchProduct.png" width="400" /></a></div><br />... See how the price is $6.00 USD today? It used to be $7.00 USD the day before. Whatever the price is at the time the test is run, we are going to call that $6.00 USD the <b>expected price</b>.<br /><br />With our test, we are going to instantiate a new book object, call it <i>bookProductPage</i>, and call the method that we wrote that loads up all the relevant test data on the Product Page:</div><div><br /></div><div><pre style="background-image: URL(http://2.bp.blogspot.com/_z5ltvMQPaa8/SjJXr_U2YBI/AAAAAAAAAAM/46OqEP32CJ8/s320/codebg.gif); background: #f0f0f0; border: 1px dashed #CCCCCC; color: black; font-family: arial; font-size: 12px; height: auto; line-height: 20px; overflow: auto; padding: 0px; text-align: left; width: 99%;"><code style="color: black; word-wrap: normal;"> Book bookProductPage = orderActions.loadProductPageDataIntoProductObject(testBook);  <br /></code></pre><div><br /></div><div>So, bookProductPage now contains:<br /><br /><ul><li>ProductTitle</li><li>Author</li><li>OfferPrice</li><li>Edition</li></ul></div>With future tests, we can compare and contrast the values of this Book object on the product page with other values. For now, we are just going to compare the OfferPrice.<br /><br />Select the <b>[ Add to Cart ] </b>button to add the product to the shopping cart .<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-LerM6xTveyo/VpBy6zKt0CI/AAAAAAAAK1w/djNwgxJ3SPE/s1600/ShoppingCartReview.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="197" src="https://4.bp.blogspot.com/-LerM6xTveyo/VpBy6zKt0CI/AAAAAAAAK1w/djNwgxJ3SPE/s400/ShoppingCartReview.png" width="400" /></a></div><br />... See how the Cart shows (1 item) and is $6.00 USD? That $6.00 will be the <b>actual price</b>.<br /><br />With our test, we need to validate that the actual price equals the expected price. We need to Assert that it is Equal.<br /><br /><h4>What the Page Object Looks Like</h4><br />For page elements, on the ShoppingCartReview page, for this test, we will only need to grab the price of the cart subtotal. We also will need to write two methods:<br /><ul><li>Verify we are on the ShoppingCartReview page after clicking the [ Add to Cart ] button.&nbsp;</li><li>Grab the price.&nbsp;</li></ul><div><b>ShoppingCartReviewPage.java</b></div><pre style="background-image: URL(http://2.bp.blogspot.com/_z5ltvMQPaa8/SjJXr_U2YBI/AAAAAAAAAAM/46OqEP32CJ8/s320/codebg.gif); background: #f0f0f0; border: 1px dashed #CCCCCC; color: black; font-family: arial; font-size: 12px; height: auto; line-height: 20px; overflow: auto; padding: 0px; text-align: left; width: 99%;"><code style="color: black; word-wrap: normal;">1:  package pages;  <br />2:  import org.openqa.selenium.By;  <br />3:  import org.testng.TestException;  <br />4:  import utils.CommonUtils;  <br />5:  /**  <br />6:   * Created by tmaher on 12/21/2015.  <br />7:   */  <br />8:  public class ShoppingCartReviewPage extends CommonUtils {  <br />9:     private final By PRICE = By.cssSelector("[class='a-color-price hlb-price a-inline-block a-text-bold']");  <br />10:    public void verifyOnShoppingCartReviewPage(){  <br />11:      String url = getCurrentURL();  <br />12:      System.out.println("SHOPPING_CART_REVIEW_PAGE: Verifying that we are on SHOPPING_CART_REVIEW_PAGE.");  <br />13:      if (!url.contains("view")){  <br />14:        throw new TestException("ERROR: Not on SHOPPING_CART_REVIEW_PAGE! URL: " + url);  <br />15:      }  <br />16:    }  <br />17:    public String getCartSubtotal(){  <br />18:      return getElementText(PRICE);  <br />19:    }  <br />20:  }  <br /></code></pre><div><br /></div><h3>Retrieve the Actual Price</h3>We already have the test object set up, login and initialization, price retrieval from the product page, we just need to go to the ShoppingCartReview page and retrieve that price, too...<br /><b><br /></b><b>PurchaseOrderTest.java</b><br /><pre style="background-image: URL(http://2.bp.blogspot.com/_z5ltvMQPaa8/SjJXr_U2YBI/AAAAAAAAAAM/46OqEP32CJ8/s320/codebg.gif); background: #f0f0f0; border: 1px dashed #CCCCCC; color: black; font-family: arial; font-size: 12px; height: auto; line-height: 20px; overflow: auto; padding: 0px; text-align: left; width: 99%;"><code style="color: black; word-wrap: normal;">1:  @Test()  <br />2:    public void test_createPurchaseOrderForSingleProduct(){  <br />3:      Products testBook = Products.HITCHHIKERS_GUIDE;  <br />4:      String username = LoadProperties.user.getProperty("tester23.username");  <br />5:      String password = LoadProperties.user.getProperty("tester23.password");  <br />6:      OrderActions orderActions = new OrderActions();  <br />7:      ShoppingCartReviewPage shoppingCartReviewPage = new ShoppingCartReviewPage();  <br />8:      orderActions.initializeLogin();  <br />9:      orderActions.navigateToHomePage();  <br />10:      orderActions.loginAs(username, password);  <br />11:      orderActions.initializeCart();  <br />12:      Book bookProductPage = orderActions.loadProductPageDataIntoProductObject(testBook);  <br />13:      orderActions.addProductToShoppingCartReview(testBook);  <br />14:      String actualCartSubtotalPrice = shoppingCartReviewPage.getCartSubtotal();  <br />15:      String expectedBookPrice = bookProductPage.getOfferPrice();  <br />16:  }  <br /></code></pre><br />Running what we have for the test looks like...<br /><pre style="background-image: URL(http://2.bp.blogspot.com/_z5ltvMQPaa8/SjJXr_U2YBI/AAAAAAAAAAM/46OqEP32CJ8/s320/codebg.gif); background: #f0f0f0; border: 1px dashed #CCCCCC; color: black; font-family: arial; font-size: 12px; height: auto; line-height: 20px; overflow: auto; padding: 0px; text-align: left; width: 99%;"><code style="color: black; word-wrap: normal;"> [TestNG] Running:  <br />  C:\Users\tmaher\.IdeaIC15\system\temp-testng-customsuite.xml  <br /> INITIALIZING: Signing out, if needed.  <br />   <br /> Navigating to Amazon.com: http://www.amazon.com  <br /> HOME_PAGE: Selecting [YOUR_ACCOUNT] in navigation bar.  <br /> HOME_PAGE: Navigating to the SIGNIN_PAGE.  <br />   <br /> SIGNIN_PAGE: Entering username: amzn.tester23@gmail.com  <br /> SIGNIN_PAGE: Entering password.  <br /> SIGNIN_PAGE: Clicking the [SIGN_IN] button.  <br />   <br /> INITIALIZING: Deleting all Items in Cart.  <br />   <br /> Starting process to load info for HITCHHIKERS_GUIDE:  <br /> PRODUCT_PAGE: Navigated to http://www.amazon.com/gp/product/0345391802  <br /> PRODUCT_PAGE: Verifying that the product title is 'The Hitchhiker's Guide to the Galaxy'  <br /> LOAD_INFO: Loading data...  <br />   <br /> Product Title: The Hitchhiker's Guide to the Galaxy  <br /> Author: Douglas Adams  <br /> Edition: Mass Market Paperback  <br /> Offer Price: $6.00  <br />   <br /> Adding HITCHHIKERS_GUIDE to cart:  <br /> PRODUCT_PAGE: Navigated to http://www.amazon.com/gp/product/0345391802  <br /> PRODUCT_PAGE: Verifying that the product title is 'The Hitchhiker's Guide to the Galaxy'  <br /> PRODUCT_PAGE: Clicking on [ADD_TO_CART] button.   <br />   <br /> SHOPPING_CART_REVIEW_PAGE: Verifying that we are on SHOPPING_CART_REVIEW_PAGE.  <br /></code></pre><br />Compare the actual price with the expected price is simple with TestNG... We can use an AssertEquals statement. If the actual price doesn't match the expected price, the test will fail.<br /><h3><br />Make Log Output More Readable</h3><br />Having the test fail is all well and good... but it doesn't match what I would write if I was designing an impromptu test plan. I would prefer to see (PASS) and (FAIL), such as:<br /><br /><b>TestHeading</b>: Describe what the test is supposed to compare:<br /><br /><ul><li>List the actual value</li><li>List the expected value</li><li>Mark if the test (PASS) or (FAIL)</li></ul><div>To do this, we can create two methods in OrderActions.java: One <i>checkMatchingValues</i>, and one which has <i>outputPassOrFailOnFieldComparison</i>:</div><div><br /></div><div><b>checkMatchingValues</b></div><div><pre style="background-image: URL(http://2.bp.blogspot.com/_z5ltvMQPaa8/SjJXr_U2YBI/AAAAAAAAAAM/46OqEP32CJ8/s320/codebg.gif); background: #f0f0f0; border: 1px dashed #CCCCCC; color: black; font-family: arial; font-size: 12px; height: auto; line-height: 20px; overflow: auto; padding: 0px; text-align: left; width: 99%;"><code style="color: black; word-wrap: normal;">1:   public boolean checkMatchingValues(String testHeading, Object actualValue, Object expectedValue) {  <br />2:      String successMessage = "\t* The Expected and Actual Values match. (PASS)\n";  <br />3:      String failureMessage = "\t* The Expected and Actual Values do not match! (FAIL)\n";  <br />4:    <br />5:      boolean doesPriceMatch = false;  <br />6:    <br />7:      System.out.println(testHeading);  <br />8:      System.out.println("\t* Expected Value: " + expectedValue);  <br />9:      System.out.println("\t* Actual Value: " + actualValue);  <br />10:    <br />11:      if (actualValue.equals(expectedValue)) {  <br />12:        System.out.println(successMessage);  <br />13:        doesPriceMatch = true;  <br />14:      } else {  <br />15:        System.out.println(failureMessage);  <br />16:        doesPriceMatch = false;  <br />17:      }  <br />18:      return doesPriceMatch;  <br />19:    }  <br />20:  }  <br /></code></pre><br /></div><div> ... This method is public. We want to be able to call this in our test every time we compare values, so that it can be outputted to the logs.&nbsp;</div><div><br /></div><div><h3>The Final Version of Our Test</h3><br />With the Assert statement and the output methods, our test now looks like:</div><br /><b>test_createPurchaseOrderForSingleProduct()</b><br /><pre style="background-image: URL(http://2.bp.blogspot.com/_z5ltvMQPaa8/SjJXr_U2YBI/AAAAAAAAAAM/46OqEP32CJ8/s320/codebg.gif); background: #f0f0f0; border: 1px dashed #CCCCCC; color: black; font-family: arial; font-size: 12px; height: auto; line-height: 20px; overflow: auto; padding: 0px; text-align: left; width: 99%;"><code style="color: black; word-wrap: normal;">1:  @Test()  <br />2:    public void test_createPurchaseOrderForSingleProduct(){  <br />3:      Products testBook = Products.HITCHHIKERS_GUIDE;  <br />4:      String username = LoadProperties.user.getProperty("tester23.username");  <br />5:      String password = LoadProperties.user.getProperty("tester23.password");  <br />6:      OrderActions orderActions = new OrderActions();  <br />7:      ShoppingCartReviewPage shoppingCartReviewPage = new ShoppingCartReviewPage();  <br />8:    <br />9:      orderActions.initializeLogin();  <br />10:      orderActions.navigateToHomePage();  <br />11:      orderActions.loginAs(username, password);  <br />12:      orderActions.initializeCart();  <br />13:    <br />14:      Book bookProductPage = orderActions.loadProductPageDataIntoProductObject(testBook);  <br />15:      orderActions.addProductToShoppingCartReview(testBook);  <br />16:      String actualCartSubtotalPrice = shoppingCartReviewPage.getCartSubtotal();  <br />17:      String expectedBookPrice = bookProductPage.getOfferPrice();  <br />18:      orderActions.checkMatchingValues("Verify the Price Listed for the book:", actualCartSubtotalPrice, expectedBookPrice);  <br />19:      assertEquals(actualCartSubtotalPrice, expectedBookPrice, "SHOPPING_CART_REVIEW: Cart Subtotal not what is expected!");  <br /></code></pre><br />We are passing in the following values from the test into <i>checkMatchingValues</i>:<br /><br /><ul><li><b>TestHeading</b>: "Verify the Price Listed for the book:"</li><li><b>Actual Value</b>: actualCartTotalPrice</li><li><b>Expected Value:</b> expectedBookPrice</li></ul><br />If the test passes, the following output will be sent to the logs...<br /><b><br /></b><b>Successful Test Execution:</b><br /><pre style="background-image: URL(http://2.bp.blogspot.com/_z5ltvMQPaa8/SjJXr_U2YBI/AAAAAAAAAAM/46OqEP32CJ8/s320/codebg.gif); background: #f0f0f0; border: 1px dashed #CCCCCC; color: black; font-family: arial; font-size: 12px; height: auto; line-height: 20px; overflow: auto; padding: 0px; text-align: left; width: 99%;"><code style="color: black; word-wrap: normal;"> SHOPPING_CART_REVIEW_PAGE: Verifying that we are on SHOPPING_CART_REVIEW_PAGE.  <br /> Verify the Price Listed for the book:  <br />      * Expected Value: $6.00  <br />      * Actual Value: $6.00  <br />      * The Expected and Actual Values match. (PASS)  <br />   <br />   <br /> ===============================================  <br /> Default Suite  <br /> Total tests run: 1, Failures: 0, Skips: 0  <br /> ===============================================  <br /></code></pre><br />... If there were failures, not only would the assertion fail, halting the test,<br /><br /><h3>Why Worry About Log Output?</h3><i>Why worry about the log output? Isn't it enough for the test to pass or fail?</i><br /><br />For me, it is not enough. Coming from a manual testing background, I want to see <i>exactly</i> how the test traverses a site. Without seeing the output explicitly spelled out as I have it, it is difficult for me to see the test composition.<br /><br />Without knowing the test composition, or seeing exactly what values are being compared and contrasted, having a test pass or fail is meaningless to me.<br /><br />Just because the test claims to have passed or failed, there still could be false positives or false negatives, as it compares and contrasts incorrect data.&nbsp;</div><br /><div><b>NEXT UP</b>:&nbsp;</div><div><ul><li><a href="https://www.blogger.com/2016/01/automate-amazon-sketch-of-possible-data.html" target="_blank">Setup a TestNG XML so we can have Data Driven tests</a>&nbsp;&gt;&gt;</li></ul></div><div><br /></div><blockquote class="twitter-tweet" lang="en"><div dir="ltr" lang="en"><a href="https://twitter.com/tjmaher1">@tjmaher1</a>&nbsp;is writing a good 8 part case study of automating a web GUI using&nbsp;<a href="https://twitter.com/hashtag/Java?src=hash">#Java</a>&nbsp;and&nbsp;<a href="https://twitter.com/hashtag/Selenium?src=hash">#Selenium</a>&nbsp;<a href="https://twitter.com/hashtag/WebDriver?src=hash">#WebDriver</a>&nbsp;<a href="https://t.co/ylnF64pFnh">https://t.co/ylnF64pFnh</a></div>— Alan Richardson (@eviltester)&nbsp;<a href="https://twitter.com/eviltester/status/685025609156788224">January 7, 2016</a></blockquote><br /><br /><div class="toc-section" id="toc-section"><b>Automate Amazon</b>: <br /><ul><li><a href="/2015/12/next-week-automating-amazon-how-i-am.html" target="_blank">Introduction</a></li><li><b>Part One:</b>&nbsp;<a href="/2015/12/automate-amazon-development-environment.html" target="_blank">Environment Setup</a></li><li><b>Part Two:</b>&nbsp;<a href="/2015/12/automate-amazon-sketch-out-use-case.html" target="_blank">Sketch Use Case</a></li><li><b>Part Three:</b>&nbsp;<a href="/2015/12/automate-amazon-commonutils-methods-and.html" target="_blank">CommonUtils, methods, exceptions</a></li><li><b>Part Four:</b>&nbsp;<a href="/2015/12/automate-amazon-writing-sign-in-test.html" target="_blank">Write Sign In Test</a></li><li><b>Part Five:</b>&nbsp;<a href="/2016/01/automate-amazon-productenums-and.html" target="_blank">Product Enums and Objects</a></li><li><b>Part Six:</b>&nbsp;<a href="/2016/01/automate-amazon-initializing-login-and.html" target="_blank">Initializing Login and Cart</a></li><li><b>Part Seven:</b>&nbsp;<a href="/2016/01/automate-amazon-writing-shopping-cart.html" target="_blank">Writing Shopping Cart Test</a></li><li><b>Part Eight:</b>&nbsp;<a href="/2016/01/automate-amazon-sketch-of-possible-data.html" target="_blank">Data Driven Tests with TestNG XML</a></li><li><b>Part Nine:</b>&nbsp;<a href="/2016/01/code-review-request-please-automated.html">Code Review Request, please!&nbsp;</a></li><li><b>Source Code:</b>&nbsp;<a href="https://github.com/tjmaher/automate-amazon/">GitHub, T.J. Maher</a></li></ul></div><br /><br><span style="background-color: white; color: #222222; font-family: &quot;calibri&quot;; font-size: 15.4px; line-height: 21.56px;">-T.J. Maher</span><br /><i style="background-color: white; color: #222222; font-family: Calibri; font-size: 15.4px; line-height: 21.56px;">&nbsp;Sr. QA Engineer, Fitbit</i><br /><i style="background-color: white; color: #222222; font-family: Calibri; font-size: 15.4px; line-height: 21.56px;">&nbsp;Boston, MA</i><br /><i style="background-color: white; color: #222222; font-family: Calibri; font-size: 15.4px; line-height: 21.56px;"><br /></i><i style="background-color: white; color: #222222; font-family: Calibri; font-size: 15.4px; line-height: 21.56px;">// Automated tester for [ 9 ] month and counting!</i><br /><i style="background-color: white; color: #222222; font-family: Calibri; font-size: 15.4px; line-height: 21.56px;"><br /></i><i style="background-color: white; color: #222222; font-family: Calibri; font-size: 15.4px; line-height: 21.56px;">Please note: 'Adventures in Automation' is a personal blog about automated testing. It is not an official blog of&nbsp;<a href="http://www.fitbit.com/" style="color: #888888; text-decoration: none;" target="_blank">Fitbit.com</a>.&nbsp;</i>