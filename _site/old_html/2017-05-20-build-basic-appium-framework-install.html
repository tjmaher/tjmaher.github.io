<i>This is part three of of a seven-part blog series. Care to go <a href="http://www.tjmaher.com/2017/05/basic-appium-framework-part-one.html">back to the beginning</a>?</i><br /><i><br /></i><i>INTERLUDE: Overheard at my workplace...&nbsp;</i><br /><i><br /></i>"Now, type on the next line, Capital-D, DesiredCapabilities, one word! Then space, the word 'caps', space, equals sign, the word 'new', Capital-D DesiredCapabilities, one word! Open-parentheses, then close-parentheses, semi-colon.<br /><br />"... On the right side of the equation, we just declared a new instance of the class DesiredCapabilities, part of the Selenium WebDriver library. To the left of the equation, we are placing that value in a variable we are calling "caps", and declaring that also to be of type DesiredCapabilities...<br /><br />"... Why is the word DesiredCapabilities underlined in red in our editor? We haven't imported the library into our 'Smoketest.java' class. On the MacBook, it is CTRL+Enter to import. Press those keys at the same time right after you see the DesiredCapability IntelliJ tooltip. That is IntelliJ IDEA's 'Intellisense' feature..."<br /><br />So far, I have spent two half-hour pair-programming sessions attempting to train a manual tester on my team how to do automation development. It's not exactly the blind-leading-the-blind, but it is pretty darned close.<br /><br />I've only been doing automation development <a href="https://techbeacon.com/coding-key-test-automation-career-are-you-prepared" target="_blank">for the past two years</a>, hopping around from Selenium WebDriver +&nbsp;Java <a href="https://techbeacon.com/switching-careers-qa-manual-testing-automation-development" target="_blank">at Fitbit</a>, Nightwatch Js +&nbsp;JavaScript&nbsp;+ NodeJs <a href="https://techbeacon.com/how-pass-coding-interview-automation-developer" target="_blank">for a few months</a> at Good Start Genetics. And I only have been teaching myself Appium since March since I signed up for this six month contract at Stop &amp; Shop's parent company, where we are designing the next generation of mobile apps for Stop &amp; Shop, Giant Food, and Martin's.<br /><br />I have been working really hard to prove my worth over the past three months as a contractor:<br /><ul><li>Checking to see if we can used a favored automation tool used at this company, <a href="http://www.tjmaher.com/2017/03/serenity-bdd-automation-framework-that.html" target="_blank">SerenityBDD</a>, for mobile apps. (Answer? There really isn't that much documentation or support on it).&nbsp;</li><li>Exploring <a href="http://www.tjmaher.com/2017/04/learning-appium-what-is-appium-server.html" target="_blank">Appium Desktop</a>, using that as a teaching tool to explain setting up an Appium environment</li><li>Putting together the <a href="https://github.com/tjmaher/basic_appium_framework" target="_blank">basic Appium framework</a>&nbsp;</li></ul><br />My latest pet project is seeing if through one-on-one training I can get a manual testers to be able to design their first automated test, then add it to my basic test framework in a pull request... all in just ten half-hour sessions.<br /><br />One roadblock, besides the fact I only started teaching myself Appium + Java in March when I was hired for this contract position? I can't shake this cold I caught two weeks ago, and I keep on losing my voice. My voice is a bullfrog croak and end up shouting in my trainee's ear too loudly as I try to excitedly improvise a lesson for my first test subject, a former SysAdmin who now is a manual tester on our project. He has some tinkering in Java, but not much. <br /><br />"Okay -- brace yourself! This next code block will contain a lot of typing..."<br /><br /><b>Rule Number One</b>: Trainees have to type everything out. Every semi-colon. Every statement. Every code block.<br /><br /><b>Rule Number Two</b>: No wizards except the first one to set up the initial project. I walked him through creating a new Gradle&nbsp;+ Java project with IntelliJ IDEA with the New Project Wizard. How to create a new directory off of the root directory called "src". How to create a sub-directory called "test". And another one called "java".<br /><b><br /></b><b>Rule Number Three</b>: Trainees have to do their own searching. Do we need to import a new Java library into our project? I tell the trainee to Google the word "Maven Repository". I describe to him how to go to and search the <a href="http://mvnrepository.com/" target="_blank">Mvnrepository.com</a> site for a third party dependency for Appium's Java-Client library. I tell him to copy-and-paste the code from the "Gradle" tab and back into our build.gradle file, in the 'Dependencies' code block. <br /><b><br /></b><b>Rule Number Four</b>: I saw on Twitter recently this question by a beginning programmer:<br /><br /><ul><li>Is it okay to copy-and-paste code?&nbsp;</li><li>To copy? Yes. To paste? No.</li></ul>... I am trying to have the trainee follow this dictum.<br /><br />... Okay, enough about work. Let's get back to learning about DesiredCapabilities, where we match the Appium Server that is running with the Android emulator that is running. Three questions though...<br /><br /><br /><h3><a name='more'></a><br />How to Launch the App With Desired Capabilities?</h3><br /><ul><li>Do you have the Appium server running, such as with Appium Desktop?&nbsp;</li><li>Do you <a href="http://www.tjmaher.com/2017/05/launch-android-emulator.html" target="_blank">have an Android emulator running</a>?&nbsp;</li><li>Did you go to the Mac Terminal and type in "adb devices" to see the list of devices? Hopefully, you set up Android SDK in your bash.profile. If so, you should be able to launch "adb", and see the list of devices, such as <i>emulator-5554</i>.&nbsp;</li></ul>If so, running the following test will install and launch <b>APIDemos-debug.apk</b> on your emulator.<br /><br /><b><u>src/test/java/Smoketest.java</u></b><br /><pre style="background: #f0f0f0; border: 1px dashed #cccccc; color: black; font-family: &quot;arial&quot;; font-size: 12px; height: auto; line-height: 20px; overflow: auto; padding: 0px; text-align: left; width: 99%;"><code style="color: black; word-wrap: normal;">   <br />import io.appium.java_client.android.AndroidDriver;<br />import io.appium.java_client.remote.MobileCapabilityType;<br />import io.appium.java_client.remote.MobilePlatform;<br />import org.openqa.selenium.remote.DesiredCapabilities;<br />import org.testng.annotations.AfterSuite;<br />import org.testng.annotations.BeforeSuite;<br />import org.testng.annotations.Test;<br /><br />import utils.*;<br /><br />import java.io.File;<br />import java.net.MalformedURLException;<br />import java.net.URL;<br />import java.util.concurrent.TimeUnit;<br /><br />   @Test  <br />   public void DesiredCapabilities() throws MalformedURLException {  <br />     final String URL_STRING = "http://127.0.0.1:4723/wd/hub";  <br />     URL url = new URL(URL_STRING);  <br />     File app = new File("ApiDemos-debug.apk");  <br />     DesiredCapabilities caps = new DesiredCapabilities();  <br />     caps.setCapability(MobileCapabilityType.DEVICE_NAME, "emulator-5554");  <br />     caps.setCapability(MobileCapabilityType.APP, app.getAbsolutePath());  <br />     caps.setCapability(MobileCapabilityType.PLATFORM_NAME, MobilePlatform.ANDROID);  <br />     AndroidDriver driver = new AndroidDriver(url, caps);  <br />     driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);  <br />   }  <br /></code></pre><br />With this article we will go over what all this code means, and how to set up this test. <br /><br /><br />To get this Java code to run, there are two things you need in your root directory:<br /><br /><ul><li>A build.gradle file (or POM.xml file) to handle downloading and installing all third-party dependencies with Gradle (or Maven). You can see what I used in my repository <a href="https://github.com/tjmaher/basic_appium_framework" target="_blank">basic_appium_framework</a>&nbsp;in the <a href="https://github.com/tjmaher/basic_appium_framework/blob/master/build.gradle" target="_blank">build.gradle</a> file.&nbsp;</li><li>You need to go to the sample app provided by the Appium project, in their java-client subsection, in <a href="https://github.com/appium/java-client/blob/master/src/test/java/io/appium/java_client/ApiDemos-debug.apk" target="_blank">APIDemos-debug.apk</a> and select the Download button to download it to your local computer. Then, copy it, and paste it in the root directory of your project.</li></ul>... What? You don't know what Gradle is? <a href="http://www.tjmaher.com/2016/06/free-udacity-course-gradle-for-android.html" target="_blank">Let me tell you where you can attend free courses on Gradle</a>! It is what I am using for build configuration to handle my third party dependencies.<br /><div><br /></div><div>Twenty years ago, we would be using Unix's <i>makefile</i>. Ten years ago, we may have used <a href="http://c2.com/cgi/wiki?ApacheAnt" target="_blank">Apache Ant</a>. Five years ago (or now) we may have used Apache Maven. Now? I like using <a href="http://gradle.org/" target="_blank">Gradle</a>. It's what they use in Android Studio.<br /><div><br /><div><br />Here is what this code is doing...<br /><br /><b><u>@Test&nbsp;</u></b><br /><br />This TestNG annotation is declaring this block of code as a&nbsp;@Test with TestNG, a testing framework much like JUnit. What is the difference? Read&nbsp;<i>"<a href="http://blog.takipi.com/junit-vs-testng-which-testing-framework-should-you-choose/" target="_blank">JUnit vs TestNG: Which Testing Framework Should You Choose?</a>"</i> by <a href="http://blog.takipi.com/author/alexzhitnitsky/">Alex Zhitnitsky</a> - <i>September 7, 2016</i><br /><br /><b><u>public void DesiredCapabilities() throws MalformedURLException {&nbsp;</u></b><br /><br />We are setting up in this Java class we are calling <b>Smoketest.java </b>this public method we are calling DesiredCapabilities.<br /><br /><ul><li>It is void because we are not returning any values from running this method.&nbsp;</li><li>It is setting this method to throw the URL Exception MalformedURLException if there are any errors with the URL. By using the URL class, it forces us to set the method up this way.&nbsp;</li><li><i>Read "<a href="https://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html" target="_blank">Controlling Access to Members of a Class</a>",&nbsp;from Oracle Java Documentation: The Java Tutorials.&nbsp;</i></li><li><i>Read "<a href="https://docs.oracle.com/javase/tutorial/essential/exceptions/throwing.html" target="_blank">How to Throw Exceptions</a>" from Oracle Java Documentation: The Java Tutorials.&nbsp;</i></li></ul><br /><b><u>final String URL_STRING = "http://127.0.0.1:4723/wd/hub";&nbsp;</u></b><br /><br />With this line, we are creating a <b>String constant</b> of the most famous IP Addresses in the world:<br /><br /><ul><li>127.0.0.1: <i>There's no place like home! There's no place like home!&nbsp;</i></li></ul><div>What is 127.0.0.1? This is the IP Address of your local machine. This is the Internet Protocol number of your <i>localhost</i>.&nbsp;</div><div><br /></div><div>Do you remember setting up Appium Desktop? We set the Host to be "0.0.0.0", also the localhost, and the port to be 4723.&nbsp;</div><br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="https://1.bp.blogspot.com/-lgIjJB-Ursc/WOWRrM4qVXI/AAAAAAAALuM/ZvUm4yCjNIoucjtNtIaup6GGhCSG1l4jACPcB/s1600/screen-start-simple.png" imageanchor="1" style="clear: left; float: left; margin-bottom: 1em; margin-right: 1em;"><img border="0" height="624" src="https://1.bp.blogspot.com/-lgIjJB-Ursc/WOWRrM4qVXI/AAAAAAAALuM/ZvUm4yCjNIoucjtNtIaup6GGhCSG1l4jACPcB/s640/screen-start-simple.png" width="640" /></a></div>When we pressed that Start Server button, it launched Appium Server.<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="https://1.bp.blogspot.com/-EJ48P-0SgEc/WOWSn_RnxnI/AAAAAAAALuU/s5G_hP9tA6U__B4QhRYiS016h6OMlHyrgCPcB/s1600/screen-logs.png" imageanchor="1" style="clear: left; float: left; margin-bottom: 1em; margin-right: 1em;"><img border="0" height="595" src="https://1.bp.blogspot.com/-EJ48P-0SgEc/WOWSn_RnxnI/AAAAAAAALuU/s5G_hP9tA6U__B4QhRYiS016h6OMlHyrgCPcB/s640/screen-logs.png" width="640" /></a></div><br /><br /><br /><br />If <b>Appium Desktop</b> is still running on your machine, <b>Appium Server</b> is quietly running in the background, listening, waiting for you to send information its way.<br /><br />... And what is listening at&nbsp;<b style="text-decoration-line: underline;">http://127.0.0.1:4723/wd/hub</b>? It's our old friend, the Selenium WebDriver Hub, just waiting to launch a test on the Emulator node that is connected to it via <i>adb</i>.<br /><br /><ul><li><i>Read HowToGeek's <a href="https://www.howtogeek.com/126304/why-is-the-localhost-ip-127.0.0.1/" target="_blank">What is Localhost IP 127.0.0.1?</a></i></li><li><i>Read<a href="http://www.tjmaher.com/search/label/SeleniumGrid" target="_blank"> on this blog about SeleniumGrid.</a></i></li></ul><br /><br />So, with "URL url = new URL(URL_STRING);" we are declaring a new String constant, a string that can never be changed, URL_STRING, to be your localhost. Note that it is tradition to have constants to be in ALL_CAPS.<br /><b><u><br /></u></b><b><u>URL url = new URL(URL_STRING)</u></b><br /><br />We are declaring that String value to be a new URL (universal resource locator class), aka a "web address". Built into this class, we need to make sure we catch the possibility that the URL could possibly be parsed incorrectly.<br /><br /><ul><li><i>Read about <a href="https://docs.oracle.com/javase/tutorial/essential/exceptions/throwing.html" target="_blank">Catching and Throwing Exceptions in Java</a></i></li></ul><br /><br /><u><b> File app = new File("ApiDemos-debug.apk"); </b></u><br />Using Java's built in I/O (Input / Output) library, we are creating a new instance of the File object, setting it up to match the APIDemos-debug.apk file we have in our root directory. Once we declare a new variable, "app" of type "File", we can use the methods contained in the File class.<br /><br />Note: We could have called this variable anything we wanted. I usually like my instance variables short, simple, and descriptive, to help not just others, but myself when I am maintaining my own code three months from now.<br /><br />Take a look at <a href="https://www.tutorialspoint.com/java/java_file_class.htm" target="_blank">TutorialsPoint's lesson on the Java Class</a>. Now that we have the app variable we could investigate the file such as:<br /><br /><ul><li>app.getName(): To get the name of the APIDemos-debug.apk</li><li>app.getPath(): To get the abstract path of the file</li><li>app.getAbsolutePath(): To get the absolute path of the file.&nbsp;</li></ul><br />... That file? It is not technically just at the root directory of the project, at "APIDemos-debug.apk". That is just the relative path when compared to the root of the project.<br /><br />Technically, it is at /Users/tmaher/code/smoketest_poc/APIDemos-debug.apk, the absolute path of the file on my MacBook.<br /><br /><b><u>DesiredCapabilities caps = new DesiredCapabilities();&nbsp;</u></b><br /><br />Here, we are declaring a new instance of Selenium WebDriver's DesiredCapabilities, and calling it the variable name, caps. We are setting up the DEVICE_NAME, the APP (using the absolute path), and the PLATFORM_NAME.<br /><br /><i>caps.setCapability(MobileCapabilityType.DEVICE_NAME, "emulator-5554"); caps.setCapability(MobileCapabilityType.APP, app.getAbsolutePath()); caps.setCapability(MobileCapabilityType.PLATFORM_NAME, MobilePlatform.ANDROID);&nbsp;</i><br /><br />If you take a look at the Java-Client Library on the MobileCapabilityType, you can see t<a href="https://appium.github.io/java-client/io/appium/java_client/remote/MobileCapabilityType.html" target="_blank">here are many capabilities you can set up</a>! APP, APPIUM_VERSION, ORIENTATION, such as portrait or landscape mode.<br /><br />Why are these in all caps? Tradition. These values are String Constants. Constants are in ALL CAPS.<br /><br /><b><u><br /></u></b><b><u>AndroidDriver driver = new AndroidDriver(url, caps);&nbsp;</u></b><br /><br />Here, we are instantiating a new AndroidDriver, giving it the properties of what we set up as a url, and the DesiredCapabilities.<br /><br /><b>A sidenote about clean code:&nbsp;</b>Imagine if we had called the DesiredCapabilities variable, "capabilites"... and we decided not to use the URL class. Then this line would have looked like:<br /><br /><span style="background-color: #fafafa; color: #222222; font-family: &quot;helvetica&quot; , &quot;arial&quot; , sans-serif; font-size: 14px;">AndroidDriver driver = new AndroidDriver(new URL("http://127.0.0.1:4723/wd/hub"), capabilities);</span><br /><br />... Writing it the way we did was a bit cleaner, no?<br /><br />See, most of Java Programming is just personal preference... or at least, it's the personal preference of the most senior developers on the team. Heck, they are the ones reviewing your code, the ones who have to approve it before you merge it into the master codebase!<br /><br />When all code is written to an agreed upon standard, all with the same format, it becomes more readable -- which helps when trying to diagnose in a hurry why your automated test failed. The first question developers ask themselves is, <i>"What in bloody hell does this code do again? I haven't looked at it in months!" </i>Readability of code is really, really important.<br /><i><br /></i><i>... back to the DesiredCapabilities! ...</i><br /><br />Note: This will&nbsp;<i>possibly</i>&nbsp;link the Appium Server and our emulator to our code. It will give its best shot.<br /><br />It will go to where we have designated the Selenium Hub, which was set to <b>127.0.0.1/wd/hub</b>, where our Appium Server is waiting patiently, running in the background of our computer.<br /><br />It will go to <i>avd</i>, and see which mobile devices are attached. Then it will attempt to compare and contrast those devices and the desired capabilites.<br /><br /><ul><li>Do we have an Android device?&nbsp;</li><li>Do we have an app at the absolute path given?</li><li>Do we have an emulator called <i>emulator-5554</i>?&nbsp;</li></ul><br />... If all those conditions are met, Appium will:<br /><br /><ul><li>Install the app on the emulator</li><li>Launch the app on the emulator</li></ul><br />... But what happens if you forget you have a physical device set up in adb, and aren't using an emulator? Then, if it is a clear-cut decision, such as only one Android device, a physical one running, Appium will take that as the closest match, and use that instead.<br /><br />If the decision is not clear cut, the process will fail.<br /><br />Now, if we run the test...<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="https://1.bp.blogspot.com/-DGyLB0o4tL0/WRUpLwIIMdI/AAAAAAAALyA/6YLKm4rPC1kRxGAjT0ZzHHqwdTBnOX_cQCPcB/s1600/1.%2BAPI%2BDemo%2BApp.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="640" src="https://1.bp.blogspot.com/-DGyLB0o4tL0/WRUpLwIIMdI/AAAAAAAALyA/6YLKm4rPC1kRxGAjT0ZzHHqwdTBnOX_cQCPcB/s640/1.%2BAPI%2BDemo%2BApp.png" width="388" /></a></div><br />... The app launches!<br /><br /><br /><br />Next, we will cover setting up PageObjects and PageFactories, and from that, we will be able to write our first test!<br /><br /><br /><div><div class="toc-section" id="toc-section"><b>Build a Basic Appium Framework</b><br /><ul><li><b>Part One:</b>&nbsp;<a href="http://www.tjmaher.com/2017/05/basic-appium-framework-part-one.html">Review How to Inspect Mobile Apps with Appium Desktop</a></li><li><b>Part Two:</b>&nbsp;&nbsp;<a href="http://www.tjmaher.com/2017/05/basic-appium-framework-part-two.html" target="_blank">Design a Basic Test, Examining Mobile Elements with Appium Desktop</a></li><li><b>Part Three:</b>&nbsp;&nbsp;<a href="http://www.tjmaher.com/2017/05/build-basic-appium-framework-install.html" target="_blank">Install and Launch an App Using Desired Capabilities</a></li><li><b>Part Four:</b>&nbsp;&nbsp;<a href="http://www.tjmaher.com/2017/05/basic-appium-framework-part-four.html">Set up the Page Objects, Page Factories and Tests</a></li><li><b>Part Five:</b>&nbsp;&nbsp;<a href="http://www.tjmaher.com/2017/05/basic-appium-framework-part-five.html">Download the tests and run them on your own MacBook!</a></li><li><b>Part Six: &nbsp;</b><a href="http://www.tjmaher.com/2017/05/launch-android-emulator.html">How to create and launch an Android emulator from Android Studio</a></li><li><b>Part Seven</b>:&nbsp;<a href="http://www.tjmaher.com/2017/06/behind-the-scenes-install-launch-appium.html" target="_blank">What happens behind the scenes as Appium installs and launches an Android app? Examining and footnoting a log file</a>.</li><li><b>GitHub:&nbsp;</b><a href="https://github.com/tjmaher/basic_appium_framework" target="_blank">Review the source code for the project.</a>&nbsp;</li></ul></div><br />Happy Testing!</div><div><br /></div><br /><br /><br />Whoa! ... As usual, after I publish a new blog article, I <a href="https://twitter.com/tjmaher1/status/865956056240926723" target="_blank">advertised this blog entry</a> on my Twitter account,&nbsp;<a href="https://twitter.com/tjmaher1" target="_blank">@tjmaher1</a>. Within a few minutes, I received an email that someone had retweeted my post...<br /><div><br /><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="https://4.bp.blogspot.com/-VEcuVaOVg9M/WSBrn7kg6TI/AAAAAAAALz0/jq90yhPo55ADbInO7qe_poOThG07HHkqQCLcB/s1600/Tweet.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="136" src="https://4.bp.blogspot.com/-VEcuVaOVg9M/WSBrn7kg6TI/AAAAAAAALz0/jq90yhPo55ADbInO7qe_poOThG07HHkqQCLcB/s640/Tweet.png" width="640" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;"><i><a href="https://twitter.com/hugs" target="_blank">Jason Huggins</a> retweeted my post!&nbsp;</i></td></tr></tbody></table>Jason Huggins...<br />... The man who <a href="https://testing.googleblog.com/2007/09/seleniums-inventor.html" target="_blank">first created Selenium at ThoughtWorks</a>&nbsp;developing it to be Selenium RC ...<br />... Who joked that since this free toolset could help people get away from Mercury Interactive ( designers of LoadRunner, QuickTest Professional, now owned by HP ), they should call the free toolset Selenium, since the element Selenium cures mercury poisoning ...<br />... Who worked with Simon Stewart <a href="https://en.wikipedia.org/wiki/Selenium_(software)" target="_blank">to create Selenium WebDriver.</a>..<br />... Who was <a href="https://en.wikipedia.org/wiki/Sauce_Labs" target="_blank">one of the founders and CTO of Sauce Labs</a>, the company who has been sponsoring Appium, growing and developing it...<br /><br />... He just retweeted a link to this backwater blog (which is basically my unedited research notes as I try to learn new tools and technologies on-the-job).<br /><br />Wow.<br /><br />Hi, @hugs!&nbsp;Happy Testing!</div><br />-T.J. Maher<br /><a href="https://twitter.com/tjmaher1" style="color: #1155cc;" target="_blank">Twitter</a>&nbsp;|&nbsp;<a href="https://www.linkedin.com/in/tjmaher1" style="color: #1155cc;" target="_blank">LinkedIn</a>&nbsp;|&nbsp;<a href="https://github.com/tjmaher" style="color: #1155cc;" target="_blank">GitHub</a><br /><br /><i>// Sr. QA Engineer, Software Engineer in Test, Software Tester since 1996.<br />// Contributing Writer for&nbsp;<a href="http://techbeacon.com/contributors/thomas-maher" style="color: #1155cc;" target="_blank">TechBeacon.</a><br />// "Looking to move away from manual QA?&nbsp;Follow&nbsp;<a href="http://www.tjmaher.com/" style="color: #1155cc;" target="_blank">Adventures in Automation</a>&nbsp;on <a href="https://www.facebook.com/AdventuresInAutomation/" target="_blank">Facebook</a>!"</i></div></div></div>