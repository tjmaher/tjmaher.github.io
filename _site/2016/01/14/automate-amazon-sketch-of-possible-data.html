<i>This post is eighth of a series of nine. Need to go <a href="/2015/12/next-week-automating-amazon-how-i-am.html" target="_blank">back to the beginning</a>?</i><br><br><h3>Background: Our Automation Framework</h3>This section is going to be a little bit different than the others, more experimental.<br /><br />With previous sections, I wrote how we <i>actually</i> created an automated framework at my workplace... as of December 2015.<br /><br />With this section, I am going to talk about how you <i>could</i> possibly do data-driven testing with TestNG, without showing a running system. On my local environment, I had some trouble with the setup with running tests in parallel. I can talk about how to modify your&nbsp;@Test, how to set up a testsuite for TestNG.<br /><br /><a name='more'></a>My workplace, for a few two-week sprints, was experimenting with how we acquire our test data. Normally, we use TestRail, a web-based graphical user interface where with dropdowns and listboxes we can set up which test product, test credit card, test billing and shipping address to use for a particular test. But what if we were to use TestNG's XML input file to get our input data?<br /><br />We're constantly revising how we do things. Our automation framework over this past summer looks very different than what we had in early December of last year.<br /><br />Compare:<br /><ul><li><a href="/2015/06/simple-manipulation-of-login-page.html" target="_blank">Testing The-Internet</a>, written&nbsp;back in June 2015</li><li><a href="/2015/12/next-week-automating-amazon-how-i-am.html" target="_blank">Automate Amazon</a>, which started back in December 2015</li></ul><br />As more automation engineers are added to our team, as we experiment with different ways of doing things, as we learn more about other teams' standards and practices, our automation framework evolves.<br /><br />Before this investigation of TestNG, our automation framework consisted of:<br /><ul><li>Storing data such as username and passwords in <b>Properties files</b> ( <a href="/2015/12/automate-amazon-writing-sign-in-test.html" target="_blank">review</a> )</li><li>Storing Credit Card numbers, Test Addresses, and other test parameters in <b>Enums</b> (&nbsp;<a href="/2016/01/automate-amazon-productenums-and.html" target="_blank">review</a>&nbsp;)&nbsp;</li><li>Storing the various instances of test data, such as the initial test data, so we can compare it with what is seen on a Review page and a Checkout page, in <b>POJOs</b>&nbsp;(&nbsp;<a href="/2016/01/automate-amazon-productenums-and.html" target="_blank">review</a>&nbsp;) which we can instantiate during out test&nbsp;&nbsp;( review )</li><li>Storing TestNG tests in <b>Test Classes</b> and&nbsp;@Test&nbsp;methods, within a folder called testcases. ( review )</li><li>The Test Class methods &nbsp;can only call methods encapsulated in our <b>Actions classes</b>&nbsp;(&nbsp;<a href="/2015/12/automate-amazon-writing-sign-in-test.html" target="_blank">review</a>&nbsp;)</li><li>The Actions classes can only call methods we have in our <b>Page Objects</b> ( <a href="/2015/12/automate-amazon-writing-sign-in-test.html" target="_blank">review</a> )</li><li>Only Page Objects can interact with the Selenium WebDriver calls to the Document Object Model (DOM), which we wrapped in try / catch / throw blocks in our <b>Common Utilities library</b> ( <a href="/2015/12/automate-amazon-commonutils-methods-and.html" target="_blank">review</a> )</li></ul><br />TestNG's XML file is going to add a new layer to the automation, allowing us to perform data-driven testing, and run multiple tests in parallel.<br /><br /><h3>What is Data Driven Testing?&nbsp;</h3>What if we treated our current test like a black box? Instead of hardcoding a test product into the test method like so...<br /><pre style="background-image: URL(http://2.bp.blogspot.com/_z5ltvMQPaa8/SjJXr_U2YBI/AAAAAAAAAAM/46OqEP32CJ8/s320/codebg.gif); background: #f0f0f0; border: 1px dashed #CCCCCC; color: black; font-family: arial; font-size: 12px; height: auto; line-height: 20px; overflow: auto; padding: 0px; text-align: left; width: 99%;"><code style="color: black; word-wrap: normal;">   @Test()  <br />   public void test_createPurchaseOrderForSingleProduct(){  <br />     Products testBook = Products.HITCHHIKERS_GUIDE;  <br />     ...  <br />     OrderActions orderActions = new OrderActions();  <br />     Book bookProductPage = orderActions.loadProductPageDataIntoProductObject(testBook);  <br /></code></pre><br />... what if we could feed in the test products before the test actually starts?<br /><br />The test would remain the same. It would be the test data that changed. That is <b>Data Driven Testing</b>.<br /><br />From TutorialsPoint: <a href="http://www.tutorialspoint.com/software_testing_dictionary/data_driven_testing.htm" target="_blank">What is Data Driven Testing?</a><br /><blockquote class="tr_bq"><i>"Data-driven testing is creation of test scripts where test data and/or output values are read from data files instead of using the same hard-coded values each time the test runs. This way, testers can test how the application handles various inputs effectively. It can be any of the below data files.</i><br /><ul><li><i>"Datapools</i></li></ul><ul><li><i>"Excel files</i></li></ul><ul><li><i>"ADO objects</i></li></ul><ul><li><i>"CSV files</i></li></ul><ul><li><i>"ODBC sources"</i></li></ul></blockquote>... With TestNG, we will be experimenting with creating an TestNG Test Suite with XML.<br /><br /><h3>What is TestNG?</h3><b><br /></b><b>From the <a href="http://testng.org/doc/documentation-main.html#introduction" target="_blank">Introduction</a> on TestNG's site:</b><br /><blockquote class="tr_bq"><i>"<a href="http://testng.org/" target="_blank">TestNG</a> is a testing framework designed to simplify a broad range of testing needs, from unit testing (testing a class in isolation of the others) to integration testing (testing entire systems made of several classes, several packages and even several external frameworks, such as application servers).</i>&nbsp;</blockquote><blockquote class="tr_bq"><i>"Writing a test is typically a three-step process:</i><br /><ul><li><i>"Write the business logic of your test and insert TestNG annotations in your code.</i></li></ul><ul><li><i>"Add the information about your test (e.g. the class name, the groups you wish to run, etc...) in a testng.xml file or in build.xml.</i></li></ul><ul><li><i>"Run TestNG".</i></li></ul></blockquote><br /><h3>&nbsp;Add Another Product to Our Framework</h3><br />Let's go to Amazon.com and select a few other products we could use as test products.<br /><br />We already have <b>The Hitchhiker's Guide to the Galaxy </b><i>by Douglas Adams</i>&nbsp;at&nbsp;<a href="http://www.amazon.com/gp/product/0345391802">http://www.amazon.com/gp/product/0345391802</a><br /><br /><br />Let's add a few more...<br /><br /><b>The Hobbit</b><i> by J.R.R. Tolkein</i>: <i>Mass Market Paperback</i>:&nbsp;<a href="http://www.amazon.com/gp/product/0345339681">http://www.amazon.com/gp/product/0345339681</a><br /><br /><b>Ringworld</b> <i>by Larry Niven: Mass Market Paperback:</i>&nbsp;<a href="http://www.amazon.com/gp/product/0345333926" target="_blank">http://www.amazon.com/gp/product/0345333926</a><br /><br /><b>Foundation</b> <i>by Issac Asimov: Mass Market Paperback:&nbsp;</i><a href="http://www.amazon.com/gp/product/0553293354" target="_blank">http://www.amazon.com/gp/product/0553293354</a><br /><br />We can add all of these books to our <b>Products</b> Enum class:<br /><pre style="background-image: URL(http://2.bp.blogspot.com/_z5ltvMQPaa8/SjJXr_U2YBI/AAAAAAAAAAM/46OqEP32CJ8/s320/codebg.gif); background: #f0f0f0; border: 1px dashed #CCCCCC; color: black; font-family: arial; font-size: 12px; height: auto; line-height: 20px; overflow: auto; padding: 0px; text-align: left; width: 99%;"><code style="color: black; word-wrap: normal;">1:  package enums;  <br />2:  /**  <br />3:   * Created by tmaher on 12/22/2015.  <br />4:   */  <br />5:  public enum Products {  <br />6:    HITCHHIKERS_GUIDE("0345391802", "The Hitchhiker's Guide to the Galaxy"),  <br />7:    THE_HOBBIT("0345339681", "The Hobbit"),  <br />8:    RINGWORLD("0345333926", "Ringworld"),  <br />9:    FOUNDATION("0553293354", "Foundation");  <br />10:    // The price will always fluctuate. The product id and product title will be more or less constant.  <br />11:    private String id;  <br />12:    private String productTitle;  <br />13:    Products(String id, String productTitle){  <br />14:      this.id = id;  <br />15:      this.productTitle = productTitle;  <br />16:    }  <br />17:    public String getProductId(){  <br />18:      return id;  <br />19:    }  <br />20:    public String getProductTitle(){  <br />21:      return productTitle;  <br />22:    }  <br />23:  }  <br /></code></pre><br />Now, we need to come up with the XML input file....<br /><br /><h3>What our Directory Structure Will Look Like</h3><br />For this blog entry, we will be expanding upon the what we already had, so the directory structure will remain the same, except for a new XML file called "testsuite_books.xml".<br /><b>src/test/java</b><br /><ul><li>actions</li><ul><li>OrderActions</li></ul><li>base</li><ul><li>LoadProperties</li></ul><li>enums</li><ul><li>Products</li><li>Url</li></ul><li>pages</li><ul><li>HomePage</li><li>SignInPage</li><li>ProductPage</li><li>ShoppingCartPage</li><li>ShoppingCartReviewPage</li></ul><li>pojo</li><ul><li>Book</li></ul><li>properties</li><ul><li>user.properties</li></ul><li>testcases</li><ul><li>PurchaseOrderTest</li><li><b>testsuite_books.xml</b></li></ul><li>utils</li><ul><li>CommonUtils</li><li>DriverUtils</li></ul></ul><h3>Refactor the Test Class</h3>Remember our test method in the PurchaseOrderTest.java class?<br /><br />We are going to modify it a bit, so the test book is no longer hard coded.<br /><br /><pre style="background-image: URL(http://2.bp.blogspot.com/_z5ltvMQPaa8/SjJXr_U2YBI/AAAAAAAAAAM/46OqEP32CJ8/s320/codebg.gif); background: #f0f0f0; border: 1px dashed #CCCCCC; color: black; font-family: arial; font-size: 12px; height: auto; line-height: 20px; overflow: auto; padding: 0px; text-align: left; width: 99%;"><code style="color: black; word-wrap: normal;">  @Parameters( {"testBook"} )  <br />   @Test()  <br />   public void test_createPurchaseOrderForSingleProduct(Products testBook){  <br />     ...  <br />     OrderActions orderActions = new OrderActions();  <br />     ShoppingCartReviewPage shoppingCartReviewPage = new ShoppingCartReviewPage();  <br />     ...  <br />     Book bookProductPage = orderActions.loadProductPageDataIntoProductObject(testBook);  <br /></code></pre><br />If we declare FOUNDATION or THE_HOBBIT to be the test book, this test will now go to those product pages.<br /><br /><div><h3>Add a TestNG XML file</h3><b>testsuite_books.xml</b><br /><pre style="background-image: URL(http://2.bp.blogspot.com/_z5ltvMQPaa8/SjJXr_U2YBI/AAAAAAAAAAM/46OqEP32CJ8/s320/codebg.gif); background: #f0f0f0; border: 1px dashed #CCCCCC; color: black; font-family: arial; font-size: 12px; height: auto; line-height: 20px; overflow: auto; padding: 0px; text-align: left; width: 99%;"><code style="color: black; word-wrap: normal;"> &lt;?xml version="1.0" encoding="UTF-8" ?&gt;  <br /> &lt;!DOCTYPE suite SYSTEM "http://testng.org/testng-1.0.dtd"&gt;  <br /> &lt;suite name="Purchasing Test: Books" verbose="1" preserve-order="true" parallel="methods" thread-count="5"&gt;  <br /> &lt;test name="Verify product price on Shopping Cart Review page | HITCHHIKERS_GUIDE" preserve-order="true"&gt;  <br />   &lt;parameter name="testBook" value="HITCHHIKERS_GUIDE"/&gt;  <br />   &lt;classes&gt;  <br />     &lt;class name="testcases.PurchaseOrderTest" /&gt;  <br />   &lt;/classes&gt;  <br /> &lt;/test&gt;  <br /> &lt;test name="Verify product price on Shopping Cart Review page | THE_HOBBIT" preserve-order="true"&gt;  <br />   &lt;parameter name="testBook" value="THE_HOBBIT"/&gt;  <br />   &lt;classes&gt;  <br />     &lt;class name="testcases.PurchaseOrderTest" /&gt;  <br />   &lt;/classes&gt;  <br /> &lt;/test&gt;  <br /> &lt;/suite&gt;  <br /></code></pre><br />This XML file sets up two tests:<br /><br /><ul><li>Verify product price on Shopping Cart Review page | HITCHHIKERS_GUIDE</li><li>Verify product price on Shopping Cart Review page | THE_HOBBIT</li></ul>In theory, running these tests, both tests would execute, each test with its own output.<br /><br />Well, that's everything that I had planned for Automate Amazon. Hope you enjoyed reading the examples as much as I had writing them!<br /><br /><br /><div class="toc-section" id="toc-section"><b>Automate Amazon</b>: <br /><ul><li><a href="/2015/12/next-week-automating-amazon-how-i-am.html" target="_blank">Introduction</a></li><li><b>Part One:</b>&nbsp;<a href="/2015/12/automate-amazon-development-environment.html" target="_blank">Environment Setup</a></li><li><b>Part Two:</b>&nbsp;<a href="/2015/12/automate-amazon-sketch-out-use-case.html" target="_blank">Sketch Use Case</a></li><li><b>Part Three:</b>&nbsp;<a href="/2015/12/automate-amazon-commonutils-methods-and.html" target="_blank">CommonUtils, methods, exceptions</a></li><li><b>Part Four:</b>&nbsp;<a href="/2015/12/automate-amazon-writing-sign-in-test.html" target="_blank">Write Sign In Test</a></li><li><b>Part Five:</b>&nbsp;<a href="/2016/01/automate-amazon-productenums-and.html" target="_blank">Product Enums and Objects</a></li><li><b>Part Six:</b>&nbsp;<a href="/2016/01/automate-amazon-initializing-login-and.html" target="_blank">Initializing Login and Cart</a></li><li><b>Part Seven:</b>&nbsp;<a href="/2016/01/automate-amazon-writing-shopping-cart.html" target="_blank">Writing Shopping Cart Test</a></li><li><b>Part Eight:</b>&nbsp;<a href="/2016/01/automate-amazon-sketch-of-possible-data.html" target="_blank">Data Driven Tests with TestNG XML</a></li><li><b>Part Nine:</b>&nbsp;<a href="/2016/01/code-review-request-please-automated.html">Code Review Request, please!&nbsp;</a></li><li><b>Source Code:</b>&nbsp;<a href="https://github.com/tjmaher/automate-amazon/">GitHub, T.J. Maher</a></li></ul></div><br /><br><span style="background-color: white; color: #222222; font-family: &quot;calibri&quot;; font-size: 15.4px; line-height: 21.56px;"><br /></span><span style="background-color: white; color: #222222; font-family: &quot;calibri&quot;; font-size: 15.4px; line-height: 21.56px;">-T.J. Maher</span><br /><i style="background-color: white; color: #222222; font-family: Calibri; font-size: 15.4px; line-height: 21.56px;">&nbsp;Sr. QA Engineer, Fitbit</i><br /><i style="background-color: white; color: #222222; font-family: Calibri; font-size: 15.4px; line-height: 21.56px;">&nbsp;Boston, MA</i><br /><i style="background-color: white; color: #222222; font-family: Calibri; font-size: 15.4px; line-height: 21.56px;"><br /></i><i style="background-color: white; color: #222222; font-family: Calibri; font-size: 15.4px; line-height: 21.56px;">// Automated tester for [ 10 ] months and counting!</i><br /><i style="background-color: white; color: #222222; font-family: Calibri; font-size: 15.4px; line-height: 21.56px;"><br /></i><i style="background-color: white; color: #222222; font-family: Calibri; font-size: 15.4px; line-height: 21.56px;">Please note: 'Adventures in Automation' is a personal blog about automated testing. It is not an official blog of&nbsp;<a href="http://www.fitbit.com/" style="color: #888888; text-decoration: none;" target="_blank">Fitbit.com</a>.&nbsp;</i></div>