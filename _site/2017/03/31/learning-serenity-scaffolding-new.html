Imagine that you are starting a new job, where you encounter yet another new <a href="http://www.tjmaher.com/2017/03/serenity-bdd-automation-framework-that.html" target="_blank">automated toolset</a> you haven't heard of before. It means that you have:<br /><br /><ul><li>Even <a href="http://www.thucydides.info/docs/serenity/" target="_blank">more documentation</a> to read, and research notes to compile.&nbsp;</li><li>Code for another <a href="https://github.com/serenity-bdd/serenity-core" target="_blank">open-source automation toolset</a> on GitHub to figure out.&nbsp;</li><li>Yet another proof-of-concept you want to put together.&nbsp;</li></ul><br />This is why I blog: The only way to keep my head on straight is to take copious amounts of research notes. This blog is where I store them.<br /><br />Am I struggling with a concept that I just can't get? I've befriended a few experts in my very short time as an automation developer (Hi, Alan, Dave, Joe, Jim, James M, Joon, Lark, Martin, James V, Bas, and Angie!) who really enjoy helping out beginners like me out. If I blog about a problem I am having, and point to the post on Twitter, I get excellent feedback from the automation community. Thank you all so much!<br /><br /><a name='more'></a><br /><br />Take a look at January 2016's project, <a href="http://www.tjmaher.com/2015/12/automate-amazon-development-environment.html" target="_blank">Automate Amazon</a>. You have:<br /><br /><ul><li>Build Configuration file, written as either with Apache <a href="http://www.tjmaher.com/search?q=Maven" target="_blank">Maven</a> pom.xml file or a <a href="http://www.tjmaher.com/search/label/Gradle" target="_blank">Gradle</a> build.gradle file to set up all the third party dependencies.&nbsp;</li><li>Test script classes written in frameworks such as <a href="http://www.tjmaher.com/search/label/JUnit" target="_blank">JUnit,</a> <a href="http://www.tjmaher.com/search/label/TestNG" target="_blank">TestNG</a> or <a href="http://www.tjmaher.com/search?q=Spock" target="_blank">Spock</a> to execute the tests.&nbsp;</li><li>Page Object classes that encapsulate the functionality on the page such as dropdown list boxes, radio buttons and text boxes. Public methods are created to, say, investigate the header text, or enter text into a textbox.&nbsp;</li><li>Action classes that bundle the page object methods together, such as when you want to loginAs(String username, String password), and want to combine methods to enter usernames, passwords, and click on Login buttons.&nbsp;</li><li>Driver classes that set up the browser you are going to run the web user interface test on.&nbsp;</li></ul><br />There are so many pre-conditions and moving parts, how the heck can anyone keep it all straight!<br /><br />Luckily, there are scaffolding tools: Software tools that build out a skeleton of a project, sample working code, and the folder structure. Some tools, such <a href="http://www.tjmaher.com/2016/10/testing-internet-with-geb-groovy-spock.html" target="_blank">as this Yeoman generator</a>, are written by fans of the product. Some, though, are written by the author of the automation toolset, itself!<br /><br />For this blog post, we will be taking a look at <b>Maven Archetypes</b>, especially the ones that John Ferguson Smart, is the founder and lead developer of Serenity BDD created.<br /><br /><h3>What Is Apache Maven</h3>From the Apache Maven Project: <a href="https://maven.apache.org/what-is-maven.html" target="_blank">What is Maven</a>?<br /><br />"Maven, a <a href="https://en.wikipedia.org/wiki/Maven">Yiddish word</a> meaning accumulator of knowledge, was originally started as an attempt to simplify the build processes in the Jakarta Turbine project. There were several projects each with their own Ant build files that were all slightly different and JARs were checked into CVS. We wanted a standard way to build the projects, a clear definition of what the project consisted of, an easy way to publish project information and a way to share JARs across several projects.<br /><br />"The result is a tool that can now be used for building and managing any Java-based project. We hope that we have created something that will make the day-to-day work of Java developers easier and generally help with the comprehension of any Java-based project".<br /><h3><br />What Is A Maven Archetype</h3>From the Apache Maven Project: <a href="https://maven.apache.org/archetype/index.html" target="_blank">What is an Archetype</a>:<br /><br /><div>"In short, Archetype is a Maven project templating toolkit. An archetype is defined as an original pattern or model from which all other things of the same kind are made. The names fits as we are trying to provide a system that provides a consistent means of generating Maven projects. Archetype will help authors create Maven project templates for users, and provides users with the means to generate parameterized versions of those project templates.<br /><br />"Using archetypes provides a great way to enable developers quickly in a way consistent with best practices employed by your project or organization. Within the Maven project we use archetypes to try and get our users up and running as quickly as possible by providing a sample project that demonstrates many of the features of Maven while introducing new users to the best practices employed by Maven. In a matter of seconds a new user can have a working Maven project to use as a jumping board for investigating more of the features in Maven. We have also tried to make the Archetype mechanism additive and by that we mean allowing portions of a project to be captured in an archetype so that pieces or aspects of a project can be added to existing projects. A good example of this is the Maven site archetype. If, for example, you have used the quick start archetype to generate a working project you can then quickly create a site for that project by using the site archetype within that existing project. You can do anything like this with archetypes".<br /><br /><h3>How Do We Use A Maven Archetype?</h3>From a Command Line utility, such a Mac Terminal, you start off calling an archetype like so:</div><div><span class="pln" style="font-family: &quot;monaco&quot; , &quot;menlo&quot; , &quot;consolas&quot; , &quot;courier new&quot; , monospace; font-size: 13px; white-space: pre-wrap;"><br /></span></div><div><span class="pln" style="font-family: &quot;monaco&quot; , &quot;menlo&quot; , &quot;consolas&quot; , &quot;courier new&quot; , monospace; font-size: 13px; white-space: pre-wrap;">mvn archetype</span><span class="pun" style="color: #666600; font-family: &quot;monaco&quot; , &quot;menlo&quot; , &quot;consolas&quot; , &quot;courier new&quot; , monospace; font-size: 13px; white-space: pre-wrap;">:</span><span class="pln" style="font-family: &quot;monaco&quot; , &quot;menlo&quot; , &quot;consolas&quot; , &quot;courier new&quot; , monospace; font-size: 13px; white-space: pre-wrap;">generate</span></div><div><br />.. And follow it by the <a href="http://maven.apache.org/archetype/maven-archetype-plugin/usage.html">Maven Archetype Plugin</a> you want. For example, if you take a look at Serenity's GitHub page, you will find <a href="https://github.com/serenity-bdd/serenity-maven-archetypes">https://github.com/serenity-bdd/serenity-maven-archetypes</a><br /><br /><a href="https://github.com/serenity-bdd/serenity-maven-archetypes/tree/master/serenity-cucumber-archetype">serenity-cucumber-archetype</a> <br /><a href="https://github.com/serenity-bdd/serenity-maven-archetypes/tree/master/serenity-jbehave-archetype">serenity-jbehave-archetype</a> <br /><a href="https://github.com/serenity-bdd/serenity-maven-archetypes/tree/master/serenity-junit-archetype">serenity-junit-archetype</a> <br /><a href="https://github.com/serenity-bdd/serenity-maven-archetypes/tree/master/serenity-junit-screenplay-archetype">serenity-junit-screenplay-archetype</a> <br /><br />There are so many choices! Which one should I pick?<br /><blockquote class="twitter-tweet" data-lang="en"><div dir="ltr" lang="en"><a href="https://twitter.com/tjmaher1">@tjmaher1</a> <a href="https://twitter.com/AppiumDevs">@AppiumDevs</a> <a href="https://twitter.com/reactnative">@reactnative</a> <a href="https://twitter.com/Android">@Android</a> You might want to see how integration with Serenity Screenplay could work, it might be faster.</div>â€” Serenity BDD (@serenitybdd) <a href="https://twitter.com/serenitybdd/status/845523395089481728">March 25, 2017</a></blockquote><script async="" charset="utf-8" src="//platform.twitter.com/widgets.js"></script><br />Okay! I will start with the Screenplay pattern! Thank you, Serenity BDD for your help!<br /><br />You can see it stored in the Maven Repository at&nbsp;<a href="https://mvnrepository.com/artifact/net.serenity-bdd/serenity-junit-screenplay-archetype" target="_blank">https://mvnrepository.com/artifact/net.serenity-bdd/serenity-junit-screenplay-archetype</a>&nbsp;and see that it was updated January 2017.<br /><br /><ul><li>Open up a Mac Terminal&nbsp;</li><li>Enter the following: <i>mvn archetype:generate serenity-junit-screenplay-archetype</i></li></ul><br />What happens next? Take a look at <b>Serenity BDD's Screenplay Tutorial </b>at&nbsp;<a href="http://serenity-bdd.info/docs/articles/screenplay-tutorial.html" target="_blank">http://serenity-bdd.info/docs/articles/screenplay-tutorial.html</a><br /><br /><div class="listingblock" style="background-color: white; box-sizing: border-box; color: rgba(0, 0, 0, 0.8); direction: ltr; font-family: &quot;Noto Serif&quot;, &quot;DejaVu Serif&quot;, serif; font-size: 16px; margin: 0px 0px 1.25em; padding: 0px;"><div class="content" style="box-sizing: border-box; direction: ltr; margin: 0px; padding: 0px; position: relative;"><pre style="background: rgb(247, 247, 248); border-radius: 4px; box-sizing: border-box; color: rgba(0, 0, 0, 0.901961); direction: ltr; font-family: &quot;Droid Sans Mono&quot;, &quot;DejaVu Sans Mono&quot;, monospace; font-size: 1em; line-height: 1.45; padding: 1em; text-rendering: optimizeSpeed; white-space: pre-wrap; word-wrap: break-word;">Choose archetype:<br />1: remote -&gt; net.serenity-bdd:serenity-junit-screenplay-archetype (Serenity automated acceptance testing project using Screenplay, Selenium 2 and JUnit)<br />Choose a number or apply filter (format: [groupId:]artifactId, case sensitive contains): :</pre></div></div>"This will (after downloading list all of the available Serenity screenplay archetypes. For this tutorial, we will be working with JUnit, so enter the number corresponding to the net.serenity-bdd:serenity-junit-screenplay-archetypeentry ("1" in the example shown here).<br /><br />"You will then be prompted to enter a groupId, artifactId, and version for your project, and a root package for your classes"</div><div>.<br /><div class="listingblock" style="background-color: white; box-sizing: border-box; color: rgba(0, 0, 0, 0.8); direction: ltr; font-family: &quot;Noto Serif&quot;, &quot;DejaVu Serif&quot;, serif; font-size: 16px; margin: 0px 0px 1.25em; padding: 0px;"><div class="content" style="box-sizing: border-box; direction: ltr; margin: 0px; padding: 0px; position: relative;"><pre style="background: rgb(247, 247, 248); border-radius: 4px; box-sizing: border-box; color: rgba(0, 0, 0, 0.901961); direction: ltr; font-family: &quot;Droid Sans Mono&quot;, &quot;DejaVu Sans Mono&quot;, monospace; font-size: 1em; line-height: 1.45; padding: 1em; text-rendering: optimizeSpeed; white-space: pre-wrap; word-wrap: break-word;">Choose a number or apply filter (format: [groupId:]artifactId, case sensitive contains): : 1<br />Define value for property 'groupId': : net.serenitybdd.tutorials<br />Define value for property 'artifactId': : todomvctests<br />Define value for property 'version':  1.0-SNAPSHOT: : 1.0.0-SNAPSHOT<br />Define value for property 'package':  net.serenitybdd.tutorials: :<br />Confirm properties configuration:<br />groupId: <i>// Entered com.tjmaher.com.serenity-archetype-generated</i><br />artifactId: // <i>Entered <span style="font-size: 1em;">serenity-archetype-generated</span></i><br /><br />version: 1.0.0-SNAPSHOT<br />package: [Default]<br /> Y: : Y</pre></div></div>"Maven will now generate a project skeleton for you":</div><div><br /><br /><div class="paragraph" style="background-color: white; box-sizing: border-box; color: rgba(0, 0, 0, 0.8); direction: ltr; font-family: &quot;Noto Serif&quot;, &quot;DejaVu Serif&quot;, serif; font-size: 16px; margin: 0px; padding: 0px;"></div><br /><div class="listingblock" style="-webkit-text-stroke-width: 0px; background-color: white; box-sizing: border-box; color: rgba(0, 0, 0, 0.8); direction: ltr; font-family: &quot;Noto Serif&quot;, &quot;DejaVu Serif&quot;, serif; font-size: 16px; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; letter-spacing: normal; margin: 0px 0px 1.25em; orphans: 2; padding: 0px; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px;"><div class="content" style="box-sizing: border-box; direction: ltr; margin: 0px; padding: 0px; position: relative;"><pre style="background: rgb(247, 247, 248); border-radius: 4px; box-sizing: border-box; color: rgba(0, 0, 0, 0.901961); direction: ltr; font-family: &quot;Droid Sans Mono&quot;, &quot;DejaVu Sans Mono&quot;, monospace; font-size: 1em; font-weight: 400; line-height: 1.45; margin: 0px; padding: 1em; text-rendering: optimizeSpeed; white-space: pre-wrap; word-wrap: break-word;">Y: : Y<br />[INFO] ----------------------------------------------------------------------------<br />[INFO] Using following parameters for creating project from Archetype: serenity-junit-screenplay-archetype:1.1.19<br />[INFO] ----------------------------------------------------------------------------<br />[INFO] Parameter: groupId, Value: net.serenitybdd.tutorials<br />[INFO] Parameter: artifactId, Value: todomvctests<br />[INFO] Parameter: version, Value: 1.0.0-SNAPSHOT<br />[INFO] Parameter: package, Value: net.serenitybdd.tutorials<br />[INFO] Parameter: packageInPathFormat, Value: net/serenitybdd/tutorials<br />[INFO] Parameter: package, Value: net.serenitybdd.tutorials<br />[INFO] Parameter: version, Value: 1.0.0-SNAPSHOT<br />[INFO] Parameter: groupId, Value: net.serenitybdd.tutorials<br />[INFO] Parameter: artifactId, Value: todomvctests<br />[INFO] project created from Archetype in dir: /Users/john/Projects/OpenSource/serenity/serenity-articles/screenplay-tutorial/sample-code/screenplay-tutorial<br />[INFO] ------------------------------------------------------------------------<br />[INFO] BUILD SUCCESS<br />[INFO] ------------------------------------------------------------------------<br />[INFO] Total time: 04:52 min<br />[INFO] Finished at: 2016-02-15T09:16:05+00:00<br />[INFO] Final Memory: 16M/309M<br />[INFO] ------------------------------------------------------------------------</pre></div></div>Want to examine the sample code? I uploaded the code <a href="https://github.com/tjmaher/serenity-archetype-generated" target="_blank">to my GitHub repository.</a><br /><br /><h3>What does the Sample Project Do?</h3>Under src/main/java:<br /><b><br /></b><b><u>Page Objects Generated:</u></b><br /><b><u><br /></u></b>Imagine if you were going to automate <a href="https://en.wiktionary.org/wiki/Wiktionary:Main_Page" target="_blank">Wiktionary.com</a>, encapsulating the functionality of the page into a Page Object. How would you do that? Here is how Jon Smart did it:<br /><br /><a href="https://github.com/tjmaher/serenity-archetype-generated/blob/master/src/main/java/com/tjmaher/serenity-archetype-generated/pages/DictionaryPage.java" target="_blank">DictionaryPage.java</a>: An abstraction of the Wiktionary page.<br /><ul><li>The annotation&nbsp;@DefaultUrl points to the web address of the page.&nbsp;</li><li>The class is set to extend Serenity's Page Object class.</li><li>Using the PageFactory implementation and&nbsp;@FindBy annotations, it maps out the search textbox and the go button as "searchTerms" and "lookupButton".&nbsp;</li><li>Declares public methods "enter_keywords(String keyword)" and "lookup_terms". First method uses the WebDriver "type" method to enter keyword data into "searchTerms", and the second uses the WebDriver "click" method to press the button.&nbsp;</li><li>It uses the Serenity class WebElementFacade to create a definition list.&nbsp;</li><li>It uses ch.lambdaj.Lambda.convert to convert the text to Strings.</li></ul><br />Under src/test/java:<br /><br /><b>Requirements: Application.java</b><br /><pre style="background: #f0f0f0; border: 1px dashed #cccccc; color: black; font-family: &quot;arial&quot;; font-size: 12px; height: auto; line-height: 20px; overflow: auto; padding: 0px; text-align: left; width: 99%;"><code style="color: black; word-wrap: normal;"> public class Application {  <br />   @Feature  <br />   public class Search {  <br />     public class SearchByKeyword {}  <br />     public class SearchByMultipleKeywords {}  <br />   }  <br /> }  <br /></code></pre>... Need a Search feature? Here one is!<br /><br /><b>Steps: See EndUserSteps.java</b><br /><pre style="background: #f0f0f0; border: 1px dashed #cccccc; color: black; font-family: &quot;arial&quot;; font-size: 12px; height: auto; line-height: 20px; overflow: auto; padding: 0px; text-align: left; width: 99%;"><code style="color: black; word-wrap: normal;"> import static ch.lambdaj.Lambda.join;  <br /> import static org.hamcrest.MatcherAssert.assertThat;  <br /> import static org.hamcrest.Matchers.containsString;  <br /> import static org.hamcrest.Matchers.hasItem;  <br /> public class EndUserSteps extends ScenarioSteps {  <br />   DictionaryPage dictionaryPage;  <br />   @Step  <br />   public void enters(String keyword) {  <br />     dictionaryPage.enter_keywords(keyword);  <br />   }  <br />   @Step  <br />   public void starts_search() {  <br />     dictionaryPage.lookup_terms();  <br />   }  <br />   @Step  <br />   public void should_see_definition(String definition) {  <br />     assertThat(dictionaryPage.getDefinitions(), hasItem(containsString(definition)));  <br />   }  <br />   @Step  <br />   public void is_the_home_page() {  <br />     dictionaryPage.open();  <br />   }  <br />   @Step  <br />   public void looks_for(String term) {  <br />     enters(term);  <br />     starts_search();  <br />   }  <br /> }  <br /></code></pre><br />Jon Smart is using:<br /><br /><ul><li>Lamda join to make magic.&nbsp;</li><li>Hamcrest's <i>assertThat</i> to make things more readable.&nbsp;</li><li>It uses the methods we declared with the DictionaryPage page object to interact with the web page itself.&nbsp;</li><li>Note that all these methods are set as variables. These steps can be reused again and again to search for different keywords, such as "apple" or "banana".&nbsp;</li></ul><br />And last but not least, we have...<br /><br /><b>Story: SearchByKeywordStoryTest.java</b><br /><pre style="background: #f0f0f0; border: 1px dashed #cccccc; color: black; font-family: &quot;arial&quot;; font-size: 12px; height: auto; line-height: 20px; overflow: auto; padding: 0px; text-align: left; width: 99%;"><code style="color: black; word-wrap: normal;"> @Story(Application.Search.SearchByKeyword.class)  <br /> @RunWith(ThucydidesRunner.class)  <br /> public class SearchByKeywordStoryTest {  <br />   @Managed(uniqueSession = true)  <br />   public WebDriver webdriver;  <br />   @ManagedPages(defaultUrl = "http://en.wiktionary.org/wiki/Wiktionary")  <br />   public Pages pages;  <br />   @Steps  <br />   public EndUserSteps endUser;  <br />   @Issue("#WIKI-1")  <br />   @Test  <br />   public void searching_by_keyword_apple_should_display_the_corresponding_article() {  <br />     endUser.is_the_home_page();  <br />           endUser.looks_for("apple");  <br />     endUser.should_see_definition("A common, round fruit produced by the tree Malus domestica, cultivated in temperate climates.");  <br />   }  <br />   @Test  <br />   public void searching_by_keyword_banana_should_display_the_corresponding_article() {  <br />     endUser.is_the_home_page();  <br />           endUser.looks_for("pear");  <br />           endUser.should_see_definition("An edible fruit produced by the pear tree, similar to an apple but elongated towards the stem.");  <br />   }  <br />   @Pending @Test  <br />   public void searching_by_ambiguious_keyword_should_display_the_disambiguation_page() {  <br />   }  <br /> }   <br /></code></pre><br />This puts everything together! In this Story it:<br /><br /><ul><li>Creates an Actor called "endUser".</li><li>The actor can use methods declared in EndUserSteps Jon Smart created such as "looks_for" and "should_see_definition".</li></ul><div>These actors are part of the abstract concept Jon Smart calls "The Screenplay Pattern". The next blog entry, we will look into Jon's Screenplay Tutorial at&nbsp;<a href="http://serenity-bdd.info/docs/articles/screenplay-tutorial.html" target="_blank">http://serenity-bdd.info/docs/articles/screenplay-tutorial.html</a></div><br /><br /><br />Until then, Happy Testing!<br /><br /><br /><div class="toc-section" id="toc-section"><b>Learning Serenity BDD</b><br /><ul><li><b>Part One:</b>&nbsp;<a href="http://www.tjmaher.com/2017/03/serenity-bdd-automation-framework-that.html">Serenity BDD: An Automation Framework That Uses Specification by Example (SBE)</a></li><li><b>Part Two:</b>&nbsp;<a href="http://www.tjmaher.com/2017/03/the-differences-between-bdd-and-tdd-is.html">What is the Difference Between TDD and BDD?</a></li><li><b>Part Three:</b>&nbsp;<a href="http://www.tjmaher.com/2017/03/learning-serenity-studying-bdd-using.html">Studying BDD using The Cucumber Book and BDD in Action</a></li><li><b>Part Four:</b>&nbsp;<a href="http://www.tjmaher.com/2017/03/learning-serenity-scaffolding-new.html">Scaffolding a new project using Maven Archetypes</a></li><li><b>Part Five:</b>&nbsp;<a href="http://www.tjmaher.com/2017/04/learning-serenity-screenplay-tutorial.html">Reviewing The Serenity Screenplay Tutorial</a></li></ul></div><br />-T.J. Maher</div><div><br /><a href="https://twitter.com/tjmaher1">Twitter</a> | <a href="https://www.linkedin.com/in/tjmaher1">LinkedIn</a> | <a href="https://github.com/tjmaher">GitHub</a><br /><br /><i>// Sr. QA Engineer, Software Engineer in Test, Software Tester since 1996.<br />// Contributing Writer for&nbsp;<a href="http://techbeacon.com/contributors/thomas-maher" style="color: #1155cc;" target="_blank">TechBeacon.</a><br />// "Looking to move away from manual QA?&nbsp;Follow&nbsp;<a href="http://www.tjmaher.com/" style="color: #1155cc;" target="_blank">Adventures in Automation</a>&nbsp;on <a href="https://www.facebook.com/AdventuresInAutomation/" target="_blank">Facebook</a>!"</i></div>