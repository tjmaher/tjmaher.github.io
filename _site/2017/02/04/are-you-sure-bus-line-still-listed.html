You are an automation developer on a team developing in Java a new public transportation web application. The customer base for the app is located in Southeastern Massachusetts. <br /><br />The MBTA (Massachusetts Bay Transportation Authority) oversees the subway lines and buses of the Greater Boston area and the surrounding suburbs. The #230 bus line stretches across four cities, connecting a Commuter Rail Station in Brockton, MA (my hometown), a bus terminal for the Brockton Area Transit's BAT bus, and a major subway stop in Braintree, MA.<br /><br />You will need in this project to get data from the MBTA for this particular bus line: bus schedules, bus stops, maybe even bus locations. But this begs the question:<br /><ul><li>How do you make sure that the #230 bus line is still listed?</li></ul><br /><h2>Attempt #1: Manual Testing: Use the MBTA's Web Site</h2>The easiest way to test to see if the #230 bus is still listed by the MBTA is a visual check through the MBTA's website.<br /><br />1) Go to http://www.mbta.com/ <br />2) Select the "Bus" icon<br /><br /><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="https://4.bp.blogspot.com/-hMu_AuRb7BY/WJZ3NHLZFnI/AAAAAAAALmM/4oa5YTCASZsuuRlijGGI-4T_gSJ9Af-TACLcB/s1600/Screenshot%2B2017-01-28%2Bat%2B6.10.29%2BPM.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="131" src="https://4.bp.blogspot.com/-hMu_AuRb7BY/WJZ3NHLZFnI/AAAAAAAALmM/4oa5YTCASZsuuRlijGGI-4T_gSJ9Af-TACLcB/s400/Screenshot%2B2017-01-28%2Bat%2B6.10.29%2BPM.png" width="400" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;"><i>From the MBTA webstite, <a href="http://www.mbta.com/" target="_blank">http://www.mbta.com/</a></i></td></tr></tbody></table><br /><b>Test #1:</b> Assert that the "230" entry is in the dropdown for "bus".<br /><br />3) Choose "230" in the dropdown provided.<br /><br />4) Wait until you are redirected to the schedule for the 230 bus line at <a href="http://mbta.com/schedules_and_maps/bus/routes/?route=230" target="_blank">http://mbta.com/schedules_and_maps/bus/routes/?route=230</a>.<br /><b></b><br /><b>Test #2: </b>Assert that the schedule appears.<br /><br /><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="https://1.bp.blogspot.com/-xhdthVgYoAM/WJZ3zF8rGZI/AAAAAAAALmQ/zzu74GIDdd0FUM3QdEGzL-NLVlvQWCESwCLcB/s1600/Screenshot%2B2017-01-28%2Bat%2B6.18.08%2BPM.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="250" src="https://1.bp.blogspot.com/-xhdthVgYoAM/WJZ3zF8rGZI/AAAAAAAALmQ/zzu74GIDdd0FUM3QdEGzL-NLVlvQWCESwCLcB/s400/Screenshot%2B2017-01-28%2Bat%2B6.18.08%2BPM.png" width="400" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;"><i>Schedules and maps from MBTA</i></td></tr></tbody></table>We can visually check confirm that:<br /><br /><ul><li>Yes, the 230 bus line is listed on the front page</li><li>Yes, the bus schedule appears... after a bit.</li></ul><br />... But what if we want this to be part of an automated test and just want a yes or no answer to the question "Is the Bus Line Listed Correctly?"<br /><br /><h2>Problems with Gathering Data from the UI</h2>Let's say that we use Selenium WebDriver for our test. We write an automated script to:<br /><br />1) Go to <a href="http://www.mbta.com/" target="_blank">http://www.mbta.com/</a> <br />2) Select the "Bus" icon<br />3) Choose "230" in the dropdown provided<br />4) Wait until you are redirected to the schedule for the 230 bus line<br /><br />And we wait... and wait ... and wait...<br /><br />... and wait ...<br /><br />... and you <i>may</i> be automatically redirected to the bus schedule, or you may not.<br /><br />Automate this with Selenium WebDriver and Java, and, mark my words, you are going to spend the next month or so trying to get the synchronization correct so the test doesn't time out.<br /><br />This test will be deemed a "flaky test". Woe to anyone attempting to use this test in their test library.<br /><br />A better test would be to not go through the web site at all to get this data, and communicate with a webservice that has this information instead.<br /><br /><h2>A Better Way to Gather Data: RESTful API Endpoints</h2><div>Luckily for us, like many sites nowadays, the MBTA offers an <a href="http://realtime.mbta.com/Portal/" target="_blank">MBTA Developer Portal</a>. Developers of third-party applications can read production data in real time, to see not just schedules of the buses and trains that the MBTA operates, but also the positions of the buses and trains in real time.&nbsp;</div><div><br /></div><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="https://4.bp.blogspot.com/-cPBAu4BJwxc/WJZ8gyk6JEI/AAAAAAAALmg/-QF29hVNup0eawzAwfcMxoLLcQpblcF3ACLcB/s1600/Screenshot%2B2017-02-04%2Bat%2B8.14.17%2BPM.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="235" src="https://4.bp.blogspot.com/-cPBAu4BJwxc/WJZ8gyk6JEI/AAAAAAAALmg/-QF29hVNup0eawzAwfcMxoLLcQpblcF3ACLcB/s400/Screenshot%2B2017-02-04%2Bat%2B8.14.17%2BPM.png" width="400" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;"><a href="http://realtime.mbta.com/Portal/"><i>http://realtime.mbta.com/Portal/</i></a></td></tr></tbody></table><div><br /></div><div>The MBTA <i>wants</i> to share it's data with the public. It provides:&nbsp;</div><div><ul><li>A public key you can use to test out the system (but make sure to subscribe for your own key if you are doing more than monkeying around)</li><li>Documentation on how to set up information queries (See the PDF for the&nbsp;<a href="http://realtime.mbta.com/Portal/Content/Documents/MBTA-realtime_APIQuickStart_2016-04-05.pdf" target="_blank">MBTA-Realtime API Quickstart Guide</a>&nbsp;dated 5/2016)</li></ul></div><h2><br />What is the Public API Key?</h2><div>"Below is the current open development API key. It may change at any time. This key is open for all developers to use in development and testing. DO NOT go into production using this key! Register for an account and request a key of your own on <a href="http://realtime.mbta.com/" target="_blank">realtime.mbta.com</a>. There is no cost.&nbsp;</div><div><br /></div><div>"As of 5/11/13 the open development API key is: &nbsp;wX9NwuHnZU2ToO7GmGR9uw"<br /><h2><br />What Information Can You Lookup?</h2>According to the QuickStart documentation, part of the items you can look up are:<br /><br /><ul><li>Stopsbylocation: GPS coordinates, listing latitude and longitude of the bus or train</li><li>Routesbystop: All the stops on the Red, Green, Orange line or bus line</li><li>Predictionsbystop: When will the next train or bus be arriving?</li><li>Alertheaders: Are there any service alerts?</li></ul><br />You can see even more information in the MBTA-Realtime API Documentation (V 2.1.3) dated January 4, 2017. Listed is that you can query routes, such as bus routes.<br /><br />If we wanted to manually interact with the API to check if the bus line #230 is still active, we can:<br /><br />1) Go to&nbsp;<a href="http://realtime.mbta.com/developer/api/v2/routes?api_key=wX9NwuHnZU2ToO7GmGR9uw&amp;format=json" target="_blank">http://realtime.mbta.com/developer/api/v2/routes?api_key=wX9NwuHnZU2ToO7GmGR9uw&amp;format=json</a>&nbsp;to view all routes.<br /><br />2) Search on the page for the numbers "230", and we can see:<br /><br /><span style="white-space: pre-wrap;"><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">{</span></span><br /><span style="white-space: pre-wrap;"><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">   "route_id" : "230 ",</span></span><br /><span style="white-space: pre-wrap;"><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">   "route_name":"230"</span></span><br /><span style="white-space: pre-wrap;"><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">}</span></span><br /><br />... And, yes, we can see that the 230 bus line exists!<br /><br /><h2>Coming Up Next Article...</h2>We have covered a bit about REST APIs before. Last year we covered:<br /><br /><ul><li><a href="http://www.tjmaher.com/2016/02/restful-testing-with-stripe-brief.html" target="_blank">How to use Apache HTTP Components</a>, such as HTTP Get, with Java testing the Stripe API</li><li><a href="http://www.tjmaher.com/2016/07/introduction-to-api-testing-with.html" target="_blank">An Introduction to REST APIs</a>: How manual testers can automate using Postman, JSON, and JavaScript</li></ul><div>For this section, we will be covering how to use Java, TestNG and REST Assured to interact with MBTAs API.&nbsp;</div><br /><br /><br />Until then, Happy Testing! <br /><br /><br /><div class="toc-section" id="toc-section"><b>Are you sure the bus line is still listed?</b><br /><ul><li><b>Part One:</b>&nbsp;<a href="http://www.tjmaher.com/2017/02/are-you-sure-bus-line-still-listed.html">Don't gather data from the UI. Use a RESTful API endpoint instead!</a></li><li><b>Part Two:</b>&nbsp;<a href="http://www.tjmaher.com/2017/03/are-you-sure-bus-line-is-still-listed.html">Interacting with the MBTA's API using REST Assured</a></li><li><b>Source Code:</b>&nbsp;<a href="https://github.com/tjmaher/RestAssuredJavaDemo/blob/master/src/test/java/MbtaRoutesTest.java">GitHub, T.J. Maher</a></li></ul></div><br /> <br>-T.J. Maher<br /><a href="https://twitter.com/tjmaher1" style="color: #1155cc;" target="_blank">Twitter</a>&nbsp;|&nbsp;<a href="https://www.linkedin.com/in/tjmaher1" style="color: #1155cc;" target="_blank">LinkedIn</a>&nbsp;|&nbsp;<a href="https://github.com/tjmaher" style="color: #1155cc;" target="_blank">GitHub</a><br /><br /><i>// Sr. QA Engineer, Software Engineer in Test, Software Tester since 1996.<br />// Contributing Writer for&nbsp;<a href="http://techbeacon.com/contributors/thomas-maher" style="color: #1155cc;" target="_blank">TechBeacon.</a><br />// "Looking to move away from manual QA?&nbsp;Follow&nbsp;<a href="http://www.tjmaher.com/" style="color: #1155cc;" target="_blank">Adventures in Automation</a>&nbsp;on <a href="https://www.facebook.com/AdventuresInAutomation/" target="_blank">Facebook</a>!"</i></div>