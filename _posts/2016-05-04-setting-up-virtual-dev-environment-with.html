---
layout: post
title: Setting up a Virtual DEV Environment with VirtualBox, Vagrant, and Docker
date: '2016-05-04T01:58:00.002-04:00'
author: T.J. Maher
tags:
- VirtualBox
- GIT
- Docker
- Vagrant
modified_time: '2016-05-04T02:06:25.066-04:00'
thumbnail: https://1.bp.blogspot.com/-0n6CAk2Ybfo/VymPPoz4V7I/AAAAAAAAK_E/PLNe6Hwm-IgOtpw-B8xDKqfoDRNBAb_1gCLcB/s72-c/vm.png
blogger_id: tag:blogger.com,1999:blog-3868566217808655382.post-6144044782324972934
blogger_orig_url: http://www.tjmaher.com/2016/05/setting-up-virtual-dev-environment-with.html
---

<h2>The Source Material: Test-Driven Java Development</h2><br />We will be covering in this blog post setting up a virtual development environment that has Ubuntu, Docker, and Mongo DB installed. We will using VirtualBox and Vagrant to set up the virtual machine. <br /><br />Are most of the technologies I mention in the previous paragraph new to you? Me, too! I'm a software tester by trade, not a developer or a SysOps guy. We'll just have to figure out this stuff together!<br /><br />As a guide, I purchased a copy of Viktor Farcic's <a href="https://www.packtpub.com/application-development/test-driven-java-development">Test-Driven Java Development</a>, printed by <a href="http://www.packtpub.com/">PACKT Publishing</a>. We will be using <b>Chapter 2: Tools, Frameworks and Environments</b> as source material.<br /><br />Since I am doing this on my system at home, I will be setting it up on my Windows 10 machine. Feel free to use whatever operating system you have at home.<br /><br /><a name='more'></a><br /><br /><h2>The Publisher: PACKT Publishing</h2><br /><a href="http://www.packtpub.com/">PACKT Publishing</a> is a print-on-demand publishing company based in India and the UK, focusing on tutorials for Open Source technologies. When learning a new technology, sometimes I just don't want to read off a computer screen; I want the information pre-packaged, in a print copy or a nicely formatted e-Book. Be warned: If you purchase one of their books: Source code is not guaranteed to be 100% correct, and the books have many typos in them... Then again, I find that if you are paying only ten or so dollars for a book, you don't mind a few errors. <br /><br />I do especially like Packt's <a href="https://www.packtpub.com/books/deal-of-the-day">Deal of the Day</a>. Each day they give away a new eBook in PDF, ePub, Mobi, or Kindle format, free! <br /><br /><h2>The Authors: Farcic &amp; Garcia</h2><br />Viktor Farcic ( <a href="https://twitter.com/vfarcic">@vfarcic</a> | <a href="https://technologyconversations.com/">Blog</a> ) is a Senior Consultant at <a href="https://www.cloudbees.com/">CloudBees</a> and a member of the <a href="https://www.docker.com/community/docker-captains">Docker Captains</a> group. <br /><br />Alex Garcia ( <a href="https://www.linkedin.com/in/alexgace">LinkedIn</a> ) is a Solutions Analyst for Everis, a management consulting company. <br /><br /><h2>Why set up a Virtual Development Environment?</h2><br />From Test-Driven Java Development: <br /><blockquote>"By using this kind of procedure, we are able to reproduce a full-stack environment in the blink of an eye. You may be wondering if this is as awesome as it sounds. The answer is yes, it is. Vagrant and Docker allow developers to focus on what they are supposed to do and forget about complex installations and tricky configurations. Furthermore, we made an extra effort to provide you with all necessary steps and resources to reproduce and test all the code examples and demonstrations in this book". </blockquote>From <a href="https://twitter.com/intertechinc">Intertech</a>'s Blog, <a href="http://www.intertech.com/Blog/tips-for-a-virtual-development-environment/">Tips for a Virtual Development Environment</a>: <br /><blockquote>"What value does setting up a virtual development environment provide?<br /><ul><li>"<b>Fast Setup for New Developers</b>: On my project, we had a new developer up and coding in a couple hours [...]</li><li><b>Environment Consistency:</b> No more choices about where to install software or what versions were being used.  You can sit down with any developer and things are where they should be. (…for the most part)</li><li>"<b>Fast Recovery:</b> As developers, we like to play with stuff. New tools, versions, configurations, etc.  With a virtualized environment, there is no risk anymore.  You can try out things and easily revert back to a good state, or start with the latest image again".</li></ul></blockquote><br /><h2>Tools and Technologies</h2><br /><b>VirtualBox:</b> According to <a href="https://en.wikipedia.org/wiki/VirtualBox">Wikipedia</a>, "Oracle VM VirtualBox (formerly Sun VirtualBox, Sun xVM VirtualBox and Innotek VirtualBox) is a free and open-source hypervisor for x86 computers from Oracle Corporation. Developed initially by Innotek GmbH, it was acquired by Sun Microsystems in 2008 which was in turn acquired by Oracle in 2010 [...] VirtualBox may be installed on a number of host operating systems, including: Linux, OS X, Windows, Solaris, and OpenSolaris [...] It supports the creation and management of guest virtual machines running versions and derivations of Windows, Linux, BSD, OS/2, Solaris, Haiku, OSx86 and others".<br /><br /><b>Vagrant</b>: From <a href="https://www.vagrantup.com/about.html">VagrantUp.com</a>: "Vagrant is a tool for building complete development environments. With an easy-to-use workflow and focus on automation, Vagrant lowers development environment setup time, increases development/production parity, and makes the 'works on my machine' excuse a relic of the past [...] Vagrant was started in January 2010 by Mitchell Hashimoto. For almost three years, Vagrant was a side-project for Mitchell, a project that he worked on in his free hours after his full-time job. During this time, Vagrant grew to be trusted and used by a range of individuals to entire development teams in large companies [...] In November 2012, HashiCorp was formed by Mitchell to back the development of Vagrant full-time. HashiCorp builds commercial additions and provides professional support and training for Vagrant". <br /><br /><b>Vagrant cachier</b>: A Vagrant plugin that reduces network usage and speeds up local Vagrant-based provisioning, improving Virtual Machine provisioning times.<br /><br /><b>Docker</b>: From <a href="https://www.docker.com/what-docker">What is Docker?</a>, on the official site: "Docker allows you to package an application with all of its dependencies into a standardized unit for software development [...] Docker containers wrap up a piece of software in a complete filesystem that contains everything it needs to run: code, runtime, system tools, system libraries – anything you can install on a server. This guarantees that it will always run the same, regardless of the environment it is running in".<br /><br /><b>Ubuntu</b>: From <a href="http://www.ubuntu.com/about/about-ubuntu">About Ubuntu</a> on the official site: "Linux was already established as an enterprise server platform in 2004, but free software was not a part of everyday life for most computer users. That’s why Mark Shuttleworth gathered a small team of developers from one of the most established Linux projects — Debian — and set out to create an easy-to-use Linux desktop: Ubuntu [...] The vision for Ubuntu is part social and part economic: free software, available to everybody on the same terms, and funded through a portfolio of services provided by Canonical".<br /><br /><b>Ubuntu/Trusty64</b>: Vagrant provides free online vagrant boxes for the general public to use on their HashiCorp site at <a href="https://atlas.hashicorp.com/boxes/search">https://atlas.hashicorp.com/boxes/search</a>. The official Ubuntu box is called "Trusty64", since it is the 64-bit version of Ubuntu.<br /><br /><b>MongoDB</b>: From MongoDB's <a href="https://www.mongodb.com/company">company site</a>: "MongoDB was founded in 2007 by the people behind DoubleClick, ShopWiki and Gilt Groupe. At DoubleClick, the site could never be down and there were daily challenges with processing, storing, and scaling data, forcing them to write their own software to handle specific problems. It was in these trenches that the team had the insight for MongoDB. They asked themselves, 'What do we wish we had while at DoubleClick?' [...] The company was founded to harness the power of the cloud for more efficiency, to scale horizontally, and to make operations easier for scale at development. Today, MongoDB boasts more than 10 million downloads, thousands of customers, and more than 1,000 partners".<br /><br /><b>Git</b>: According to <a href="https://en.wikipedia.org/wiki/Git_(software)">Wikipedia</a>, "Git is a version control system that is widely used for software development and other version control tasks. It is a distributed revision control system with an emphasis on speed, data integrity, and support for distributed, non-linear workflows. Git was initially designed and developed in 2005 by Linux kernel developers (including Linus Torvalds) for Linux kernel development".<br /><br /><b>Bitbucket:</b> Purchased by Atlassian ( owner of JIRA, Confluence, and HipChat) in 2010, is yet another place for code storage. While GitHub focuses on Open Source technologies, with free storage only for public projects, Bitbucket focuses on private enterprise software. <br /><br />Now that we have been introduced to the cast of characters, we may now begin!  <br /><br /><h2>Downloads and Installations</h2><br /><b>Git-SCM</b>: <br /><ul><li>Go to <a href="https://git-scm.com/downloads">https://git-scm.com/downloads</a> and download the correct version for your local computer.</li><li>If you need help installing Git, read Pro Git's chapter <a href="https://git-scm.com/book/en/v2/Getting-Started-Installing-Git">Getting Started - Installing Git</a></li></ul><i>... Note: If you want to learn all the ins-and-outs of Git, read the free book on Git, <a href="https://git-scm.com/book/en/v2">Pro Git</a>, by Scott Chacon and Ben Straub.</i> <br /><br /><b>VirtualBox</b>: <br /><ul><li>Go to <a href="https://www.virtualbox.org/wiki/Downloads">http://https://www.virtualbox.org/wiki/Downloads</a> and download and install the correct version for your local computer. For Windows machines, it will be "VirtualBox 5.0.20 for Windows hosts" -&gt; x86/amd64 </li></ul><br /><b>Vagrant</b>: <br /><ul><li>Go to <a href="https://www.vagrantup.com/downloads.html">https://www.vagrantup.com/downloads.html</a> and download and install the correct version for your local computer.</li></ul><br /><b>Vagrant cachier</b>: <br /><ul><li>Once you have Vagrant installed, go to the Terminal if you are using a Mac or the Command Prompt if you are using a PC</li><li>Type the following: vagrant plugin install vagrant-cachier</li><li>The plugin will be automatically installed.</li></ul><br /><br /><h2>What is a Vagrantfile?</h2><br />A <i>Vagrantfile</i> is a configuration file for Vagrant. From VagrantUp's <a href="https://www.vagrantup.com/docs/vagrantfile/">Vagrantfile</a> page: <br /><blockquote><i>"The primary function of the Vagrantfile is to describe the type of machine required for a project, and how to configure and provision these machines. Vagrantfiles are called Vagrantfiles because the actual literal filename for the file is Vagrantfile (casing does not matter unless your file system is running in a strict case sensitive mode).<br /><br /> "Vagrant is meant to run with one Vagrantfile per project, and the Vagrantfile is supposed to be committed to version control. This allows other developers involved in the project to check out the code, run vagrant up, and be on their way. Vagrantfiles are portable across every platform Vagrant supports.<br /><br /> "The syntax of Vagrantfiles is Ruby, but knowledge of the Ruby programming language is not necessary to make modifications to the Vagrantfile, since it is mostly simple variable assignment". </i></blockquote><br /><h2>Review Farcic's Vagrantfile</h2><br />To help us configure the virtual machine, we will clone, using Git, a copy of configuration file the author Viktor Farcic has graciously set up in his Atlassian Bitbucket account.<br /><br /><b>Vagrantfile</b><br /><pre class="brush: ruby"># -*- mode: ruby -*-<br /># vi: set ft=ruby :<br /><br />Vagrant.configure(2) do |config|<br />  config.vm.box = "ubuntu/trusty64"<br /> <br />  config.vm.network "forwarded_port", guest: 27017, host: 27017<br /><br />  config.vm.provider "virtualbox" do |vb|<br />    vb.memory = "1024"<br />  end<br /><br />  config.vm.provision "docker" do |d|<br />    d.run "mongoDB", image: "mongo:2", args: "-p 27017:27017"<br />  end<br /><br />  if Vagrant.has_plugin?("vagrant-cachier")<br />    config.cache.scope = :box<br />  end<br /><br />end<br /></pre><br /><ul><li>Go to <a href="https://bitbucket.org/vfarcic/tdd-java-ch02-example-vagrant/src">https://bitbucket.org/vfarcic/tdd-java-ch02-example-vagrant/src</a></li><li>Select <b>Vagrantfile</b> to view the source code.</li><li>Select in the Left Hand Menu, under <b>Actions</b> the word <b>Clone</b>.</li><li>Copy the URL and paste it into a text editor. We will be making adjustments to the text.</li></ul><br /><i>Need help? You can review Atlassian's <b>How to clone a repository</b>: <a href="https://confluence.atlassian.com/bitbucket/clone-a-repository-223217891.html">https://confluence.atlassian.com/bitbucket/clone-a-repository-223217891.html</a>.</i><br /><br />The piece of text we now have in our text editor is: <br /><ul><li>git clone https://bitbucket.org/vfarcic/tdd-java-ch02-example-vagrant.git</li></ul><br />Let's say that we want to store "tdd-java-ch02-example-vagrant.git" into a new folder called "tdd", and calling the file "tdd-java-ch02-example-vagrant". We would edit the text in our text editor to read: <br /><ul><li>git clone https://bitbucket.org/vfarcic/tdd-java-ch02-example-vagrant.git tdd/tdd-java-ch02-example-vagrant</li></ul><br />We could copy and paste this code into the Command Prompt of your machine like so:<br /><br /><pre style="background: #f0f0f0; border: 1px dashed #cccccc; color: black; font-family: &quot;arial&quot;; font-size: 12px; height: auto; line-height: 20px; overflow: auto; padding: 0px; text-align: left; width: 99%;"><code style="color: black; word-wrap: normal;"> C:\&gt;git clone https://bitbucket.org/vfarcic/tdd-java-ch02-example-vagrant.git tdd/tdd-java-ch02-example-vagrant  <br /></code></pre><br />Once everything is done copying over to your local computer, you can change directory first to the new directory "tdd", then "tdd-java-ch02-example-vagrant".<br /><br /><pre style="background: #f0f0f0; border: 1px dashed #cccccc; color: black; font-family: &quot;arial&quot;; font-size: 12px; height: auto; line-height: 20px; overflow: auto; padding: 0px; text-align: left; width: 99%;"><code style="color: black; word-wrap: normal;"> C:\&gt;cd tdd  <br /> C:\tdd&gt;cd tdd-java-ch02-example-vagrant   <br /></code></pre><br /><h2>Vagrant Up!</h2><br />Whether you want to start the virtual machine, go to the directory you placed the Vagrantfile, and type in:<br /><br /><pre style="background: #f0f0f0; border: 1px dashed #cccccc; color: black; font-family: &quot;arial&quot;; font-size: 12px; height: auto; line-height: 20px; overflow: auto; padding: 0px; text-align: left; width: 99%;"><code style="color: black; word-wrap: normal;"> vagrant up  <br /></code></pre><br /><br /><b>Initial Installation:</b><br /><br /><ul><li>The first time you Vagrant Up, it finds and install virtualbox and "ubuntu/trusty64" at atlas.hashicoep.com/ubuntu/trusty64. As Viktor Farcic writes, "Be patient until the execution is finished. Once done, you'll have a new virtual machine with Ubuntu. Docker and one MongoDB instance up and running. The best part is that all this was accomplished with a single command".</li></ul><br /><b>Vagrant Commands within a PC's Command Prompt / Mac Terminal:</b><br /><ul><li>vagrant up: Brings up the Virtual Machine</li><li>vagrant status: Shows the status of the VM</li><li>vagrant halt: Stops the virtual machine</li></ul><br />... If you feel better with a Graphic User Interface to start or stop the VM, you can always just fire up the VirtualBox app on your PC or Mac... but that might be cheating. I keep telling myself, I will never get used to the Command Line Interface if I always go to the GUI.<br /><br /><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="https://1.bp.blogspot.com/-0n6CAk2Ybfo/VymPPoz4V7I/AAAAAAAAK_E/PLNe6Hwm-IgOtpw-B8xDKqfoDRNBAb_1gCLcB/s1600/vm.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="297" src="https://1.bp.blogspot.com/-0n6CAk2Ybfo/VymPPoz4V7I/AAAAAAAAK_E/PLNe6Hwm-IgOtpw-B8xDKqfoDRNBAb_1gCLcB/s400/vm.png" width="400" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">.<i>.. But I like the GUI!&nbsp;</i></td></tr></tbody></table><br /><br /><h2>Connecting to the Ubuntu box</h2><br />To start the new Ubuntu box once the VM is up and running, type in:  <br /><pre style="background: #f0f0f0; border: 1px dashed #cccccc; color: black; font-family: &quot;arial&quot;; font-size: 12px; height: auto; line-height: 20px; overflow: auto; padding: 0px; text-align: left; width: 99%;"><code style="color: black; word-wrap: normal;"> vagrant ssh  <br /></code></pre><br />Let's now stop the Ubuntu OS from running.   <br /><pre style="background: #f0f0f0; border: 1px dashed #cccccc; color: black; font-family: &quot;arial&quot;; font-size: 12px; height: auto; line-height: 20px; overflow: auto; padding: 0px; text-align: left; width: 99%;"><code style="color: black; word-wrap: normal;"> exit  <br /> vagrant halt  <br /></code></pre><br /><br />Let's start the VM back up, connect to Ubuntu, and this time start the MongoDB container and see what processes have started:<br /><pre style="background: #f0f0f0; border: 1px dashed #cccccc; color: black; font-family: &quot;arial&quot;; font-size: 12px; height: auto; line-height: 20px; overflow: auto; padding: 0px; text-align: left; width: 99%;"><code style="color: black; word-wrap: normal;"> vagrant up<br /> vagrant ssh<br /> docker start mongoDB  <br /> docker ps  <br /></code></pre><br />Congratulations! It's a Virtual Development Environment! <br /><br />... We will return to this down the road, as I cover more of Viktor Farcic's book. <br /><br />Until then, Happy Testing! <br /><br />-T.J. Maher<br />Sr. QA Engineer, <br />Fitbit-Boston<br /><br /><i>// QA Engineer since Aug. 1996 <br />// Automation developer for [ 1 ] year and still counting!</i> 