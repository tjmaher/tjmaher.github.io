---
layout: post
title: 'Tinkering with Twitter: Twitter and the Search API'
date: '2017-10-09T19:38:00.001-04:00'
author: T.J. Maher
tags:
- Java
- Twitter
- API
modified_time: '2017-11-04T16:40:22.797-04:00'
thumbnail: https://i.ytimg.com/vi/7YcW25PHnAA/default.jpg
blogger_id: tag:blogger.com,1999:blog-3868566217808655382.post-7124610876458838433
blogger_orig_url: http://www.tjmaher.com/2017/10/tinkering-with-twitter-1.html
---

Let's say you are an automation developer and your boss gives you a new assignment: <b>Test the search functionality for Twitter</b>, how would you do it?<br /><br />You <i>could</i> cobble together a Selenium WebDriver framework, one that spun up a browser, identified where the search bar was on <a href="http://twitter.com/" target="_blank">Twitter.com</a>, typed in a search keywords, and scraped the screen when the results appeared...<br /><br />... The problem with this approach? You aren't actually testing the search functionality. You are testing how the web application handles the search functionality. Why not the search functionality itself?<br /><br />Like the MBTA website we explored back in February, <a href="http://www.tjmaher.com/2017/02/are-you-sure-bus-line-still-listed.html" target="_blank">Are You Sure the Bus Line is Listed? Gathering data using REST APIs and REST Assured</a>, much of the data is extracted from an API, an <i>application programming interface</i>.<br /><br />With this series of blog articles we will be walking through:<br /><br />1) Setting up a development environment:<br /><ul><li><b>IntelliJ</b> as the integrated development environment (IDE)</li><li>We will be using a programming library called <b>Twitter4J</b>&nbsp;to interact with Twitter's API.</li><li>Since the Test4J programming library is in Java, we will be using that as a programming language.</li><li>Maven handling the third-party dependencies.</li></ul>2) Coming up with test data and posting it to Twitter.<br /><br />3) Searching for that test post we created.<br /><br />Let's begin!<br /><br /><a name='more'></a><br /><br /><h2></h2><div><h2>Wait! What is an API?</h2>"An application program interface (API) is a set of <a href="http://www.webopedia.com/TERM/R/routine.html">routines</a>, <a href="http://www.webopedia.com/TERM/P/protocol.html">protocols</a>, and tools for building <a href="http://www.webopedia.com/TERM/A/application.html">software applications</a>. Basically, an API specifies how software components should interact. Additionally, APIs are used when programming graphical user interface (<a href="http://www.webopedia.com/TERM/G/Graphical_User_Interface_GUI.html">GUI</a>) components. A good API makes it easier to develop a <a href="http://www.webopedia.com/TERM/P/program.html">program</a> by providing all the building blocks. A <a href="http://www.webopedia.com/TERM/P/programmer.html">programmer</a> then puts the blocks together". <i>&nbsp;- Webopedia, <a href="http://www.webopedia.com/TERM/A/API.html" target="_blank">What is an API</a>?</i></div><div>Instead of having someone needing to update information by hand on a website, or pull data directly from a database, you can pull live data in real time using the API, all throughout the slowness of going through a user interface.</div><div><br />For more information, watch the following video...<br /><b><u><br /></u></b><b><u>WebConcepts: Rest API Concepts and Examples</u></b></div><iframe allowfullscreen="" frameborder="0" height="315" src="https://www.youtube.com/embed/7YcW25PHnAA" width="560"></iframe> <br /><div><i><a href="https://youtu.be/7YcW25PHnAA" target="_blank">https://youtu.be/7YcW25PHnAA</a></i><br /><br /><br />Many different companies offer public APIs so developers can incorporate their data into third-party applications. You can find a whole list of them at <a href="https://www.programmableweb.com/" target="_blank">The Programmable Web</a>.<br /><br />One of the companies that allows you to access their data? <b>Twitter</b>!<br /><br /><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="https://2.bp.blogspot.com/-5A1rQ4G1WOY/WdwABHi8jaI/AAAAAAAAMG0/PW1miTZcx90uF8fsMLexnyR8LHZTno0YACLcBGAs/s1600/Twitter-logo.jpg" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" data-original-height="628" data-original-width="1200" height="167" src="https://2.bp.blogspot.com/-5A1rQ4G1WOY/WdwABHi8jaI/AAAAAAAAMG0/PW1miTZcx90uF8fsMLexnyR8LHZTno0YACLcBGAs/s320/Twitter-logo.jpg" width="320" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">Find documentation for their API at&nbsp;<a href="https://developer.twitter.com/" target="_blank">https://developer.twitter.com</a></td></tr></tbody></table><br /><br />Twitter offers to the general public many APIs such as:&nbsp;</div><div><ul><li><b>Twitter Search API:</b> Search for Tweets posted in the last seven days</li><li><b>Twitter Ads API:</b> &nbsp;Set up Ad Campaigns</li><li><b>Engagments API: </b>"[R]equests take an array of Tweet IDs, an array of engagement types, and a simple description of how you want the output arranged".</li><li><b>Direct Message API:</b> Send DMs to people.&nbsp;</li></ul><div>... All of this and more can be found on <a href="https://developer.twitter.com/" target="_blank">Developer.Twitter.Com</a>.<br /><br /><b>Want to Keep Tabs on Changes to Twitter's API?</b><br /><br /><ul><li>If you want to see what changes are taking place with Twitter's API, Follow&nbsp;<a href="https://twitter.com/TwitterAPI" target="_blank">@TwitterAPI</a></li></ul></div></div><div><b>How Do We Interact With Twitter's API?</b><br /><br /></div><div>There are many ways to interact with an API. On Adventures in Automation, we've used <a href="http://www.tjmaher.com/2016/02/coming-up-how-to-work-with-rest-apis.html" target="_blank">Apache's HTTP Components</a>, we've used <a href="http://www.tjmaher.com/2016/07/introduction-to-api-testing-with.html" target="_blank">Postman</a>, we've used the Java library <a href="http://www.tjmaher.com/2017/02/are-you-sure-bus-line-still-listed.html" target="_blank">Rest-Assured</a>, and now we are going to use Twitter4J.<br /><br />Shall we begin?<br /><br /></div><div><h2>Wait! What the heck is Twitter4J?</h2><br />Twitter4J is a Java library created by <a href="http://linkedin.com/in/yusuke/">Yusuke Yamamoto</a>, a Java developer in Japan and a one-time Developer Advocate at Twitter.&nbsp;</div><div><br /><ul><li>Official Website: <a href="http://twitter4j.org/en/">http://twitter4j.org/en/</a> </li><li>Github site: <a href="https://github.com/yusuke/twitter4j">https://github.com/yusuke/twitter4j</a> </li></ul><br />Twitter4J bills itself as "an unofficial Java library for the <a href="https://dev.twitter.com/docs">Twitter API</a>. With Twitter4J, you can easily integrate your Java application with the Twitter service. <br /><br /></div><div>"Twitter4J is featuring: <br />✔ "100% Pure Java - works on any Java Platform version 5 or later<br />✔ "<a href="http://code.google.com/android/">Android</a> platform and <a href="http://code.google.com/appengine/">Google App Engine</a> ready<br />✔ "Zero dependency : No additional jars required<br />✔ "Built-in OAuth support<br />✔ "Out-of-the-box gzip support<br />✔ "100% Twitter API 1.1 compatible"</div><br />All you need to do is add Twitter4J to your project, and set up the OAUTH Credentials, either by setting up a Properties file, using a ConfigurationBuilder class, or feeding the credentials in through the command line when launching a program that uses Twitter4J. You can read more about it on Twitter4J's <a href="http://twitter4j.org/en/configuration.html">Configuration Page</a>.<br /><br /><blockquote class="tr_bq">debug=true oauth.consumerKey=********************* oauth.consumerSecret=****************************************** oauth.accessToken=************************************************** oauth.accessTokenSecret=******************************************</blockquote><br /><h2><b>What is OAUTH?</b></h2>When you or I sign in using out username and password to our Twitter , we are using User Level Authentication. How do Applications connect to Twitter? OAUTH.<br /><br />OAuth is a way Twitter created back in 2009 to grant websites or applications access to their information without giving them the passwords.<br /><br />According to <a href="http://archive.oreilly.com/pub/au/3514">Kevin Makice</a> in <a href="http://oreilly.com/catalog/9780596154615/">Twitter API: Up and Running</a> (2009):<br />"In February 2009, Twitter released its first implementation of OAuth as a closed beta to developers on the <a href="http://groups.google.com/group/twitter-development-talk">Google discussion group</a>. A few hours after this release, <a href="http://inuda.com/">Inuda</a>, a web application design firm, quickly showed a proof of concept with Twitter’s code.[<a href="http://archive.oreilly.com/pub/a/web-services/excerpts/9780596154615/meet-twitter-api.html#ftn.id2726282">63</a>] Within a week, successful tests and sample code existed for PHP, Python, and Ruby. A growing list of OAuth resources is available on the <a href="http://apiwiki.twitter.com/OAuth-Examples">Twitter API wiki</a>.<br /><br />"Among those efforts was a sample script from Abraham Williams (@poseurtech).[<a href="http://archive.oreilly.com/pub/a/web-services/excerpts/9780596154615/meet-twitter-api.html#ftn.id6878346">64</a>] Williams’ solution follows a straightforward process to authenticate with Twitter’s OAuth. OAuth functions by managing multiple pairs of tokens: the tokens for the specific user request, and the ones used to allow the application to later access parts of that user’s Twitter account. There is also an initial pair used to register the application. [...] Each application will first need to be registered with Twitter".<br /><div><br />Applications use "Application-only Authentication".<br /><b><br /></b><br /><div><b>What is Application-only authentication?</b></div><br />"<a href="https://dev.twitter.com/oauth/application-only">Application-only authentication</a> is a form of authentication where an application makes API requests on its own behalf, without a user context. API calls are still rate limited per API method, but the pool each method draws from belongs to the entire application at large, rather than from a per-user limit. API methods that support this form of authentication will contain two rate limits in their documentation, one that is per user (for application-user authentication) and the other is per app (for this form of application-only authentication). Not all API methods support application-only authentication, because some methods require a user context (for example, a Tweet can only be created by a logged-in user, so user context is required for that operation)".<br /><div><br /></div><div><div style="text-align: right;">- <a href="https://developer.twitter.com/en/docs/basics/authentication/overview/oauth" target="_blank">Developer.Twitter.Com / Docs / Basics / Authentication</a></div><br /><div><div><br /></div><div><b>How do we get our own OAUTH credentials for Twitter?</b></div><div><br /></div><div>To be able to access Twitter APIs, you need to:</div><div><br /></div><div>1) Create a Twitter Account:&nbsp;</div><div><ul><li>Go to <a href="http://twitter.com/" target="_blank">Twitter.com</a> and create an account for yourself.&nbsp;</li></ul><div>2) Create a <b>Twitter App</b> to use the Twitter API</div></div><div><ul><li>Go to&nbsp;<a href="https://apps.twitter.com/" target="_blank">https://apps.twitter.com/</a>&nbsp;and choose to <b>Create a new app</b>.</li><li>Come up with a name and a description of how your project will be using the Twitter APIs. I called mine: "Tinkering With Twitter".</li><li>Are you creating a full blown app that will interact with a website you are creating? Enter it here. If not, enter a placeholder URL.&nbsp;</li><li>Your app will be accessible from<a href="https://apps.twitter.com/" target="_blank">&nbsp;https://apps.twitter.com/</a></li></ul></div><div>3) Find your new OATH Credentials.</div><div><ul><li>Go to&nbsp;<a href="https://apps.twitter.com/" target="_blank">https://apps.twitter.com/</a></li><li>Select the link on the Dashboard to enter your Twitter App.</li><li>Next to "Consumer Key and Access Key" select the link for "manage keys and access tokens".&nbsp;</li></ul><div>There, you will see your:</div></div><div><ul><li>Consumer Key</li><li>Consumer Secret</li><li>Access Token</li><li>Access Secret</li></ul><div>Record these values, but don't share them, especially the secrets! You will be inputting them in a properties file once we set up the project.&nbsp;</div></div><div><br /></div><div><br /></div><h2>What can I search for using the Twitter Search API?</h2><div><br /></div><div>Using the Twitter Search API, you can search all Tweets in the past seven days by:</div><div><ul><li>When a Tweet was <b>created_at</b></li><li>The Twitter <b>id</b> of a particular Tweet</li><li>The <b>text</b> of a Tweet.</li><li>If there is anything truncated in the Tweet</li><li>If there are any hashtags, symbols, user mentions, or URLs in the text.&nbsp;</li><li>If the Tweet was <b>in_reply_to_status_id</b>, user id, or screen name.&nbsp;</li><li>If the Tweet is favorited and retweted, the retweet_count, and the favorite_count</li><li>The language of the Tweet</li></ul></div><div>... And a lot more!&nbsp;</div><div><br /></div><div><blockquote class="tr_bq" style="text-align: right;">"<span style="background-color: white; color: #657786; font-family: &quot;helvetica neue lt&quot; , &quot;helvetica neue&quot; , &quot;helvetica&quot; , &quot;arial&quot; , sans-serif; font-size: 15.96px;">The Twitter API platform currently offers a few different options for programmatically searching the index of Tweets. These options range from the standard 7-day Search API (search/tweets) to the enterprise Full-Archive Search API. Each option offers a varying level of access and query capabilities"&nbsp;</span></blockquote><div style="text-align: right;">-Twitter Docs, <a href="https://developer.twitter.com/en/docs/tweets/search/overview" target="_blank">Search API</a>&nbsp;</div><h2>Advanced Search Parameters</h2><div>Want to up your searching game for Twitter? Read the Twitter article, <a href="https://support.twitter.com/articles/20170322#search" target="_blank">Advanced TweetDeck Features</a>, the Search section.&nbsp;</div><br />"After you run a search, you will be given the option to customize your results even further. You can alter your search in several ways, including: 'showing,' 'matching,' 'excluding,' 'written in,' and 'Retweets.' You will find these filters by opening the filter option at the top of the column.<br /><br />"Examples:<br /><ol><li>"To search for Tweets mentioning '#SanFrancisco' that link to news stories, type the following in the search box: #SanFrancisco filter:news</li><li>"To exclude a search term, use a negative filter type ('-filter:type') in your search query.&nbsp;</li><li>"To search for mentions of #space from verified accounts, excluding Retweets, type the following in the search box: #space filter:verified -filter:nativeretweets</li><li>"To search for mentions of either 'red' or 'black', with mentions of either 'cold' or 'hot', with at least twenty Retweets, but excluding mentions of '#thedress', and linking to news sources, type the following in the search box: (red OR black) AND (cold OR hot) min_retweets:20 filter:news -#thedress"</li></ol><div>You can also:</div><div><ul><li>Search for hashtags, such as "#QA"</li><li>See news articles: "filter:news"</li><li>Combine them! Is there any news in the past seven days about QA? "filter:news #QA"</li><li>What's new from a user such as Ministry of Testing - Boston,&nbsp;@MoT_Boston? "from:MoT_Boston"</li></ul></div><h2><br />How Will I Know When Something Goes Wrong?</h2><div>It's not just Searching and Posting that can be done through the API, you can also see details when things go wrong!<br /><br />If you attempt to connect to a Twitter API and something goes wrong, it will return an HTTP Status Codes, such as HTTP Status Code 404: Not Found, HTTP Status Code 401: Unauthorized and many others... See Twitter's Chart, listed on&nbsp;<a href="https://developer.twitter.com/en/docs/basics/response-codes" target="_blank">https://developer.twitter.com/en/docs/basics/response-codes</a><br /><ul><li>200: OK - Success!</li><li>304: Not Modified -- There was no new data to return.&nbsp;</li><li>400: Bad Request &nbsp;-- The request was invalid or cannot be otherwise served. An accompanying error message will explain further. Requests without authentication are considered invalid and will yield this response.&nbsp;</li><li>401: Unauthorized -- Missing or incorrect authentication credentials. This may also returned in other undefined circumstances.</li><li>403: Forbidden -- The request is understood, but it has been refused or access is not allowed. An accompanying error message will explain why. This code is used when requests are being denied due to <a href="https://support.twitter.com/articles/15364-about-twitter-limits-update-api-dm-and-following">update limits</a> . Other reasons for this status being returned are listed alongside the response codes in the table below.&nbsp;</li><li>404: Not found -- The URI requested is invalid or the resource requested, such as a user, does not exist.&nbsp;</li><li>406: Not Acceptable -- Returned when an invalid format is specified in the request.&nbsp;</li><li>410: Gone -- This resource is gone. Used to indicate that an API endpoint has been turned off.&nbsp;</li><li>420: Enhance Your Calm: Returned when an application is being <a href="https://developer.twitter.com/en/docs/basics/rate-limiting.html">rate limited</a> for making too many requests.&nbsp;</li><li>422: Unprocessable Entity: Returned when the data is unable to be processed (for example, if an image uploaded to <a href="https://developer.twitter.com/en/docs/accounts-and-users/manage-account-settings/api-reference/post-account-update_profile_banner.html">POST account / update_profile_banner</a> is not valid, or the JSON body of a request is badly-formed).&nbsp;</li><li>429: Too Many Requests: Returned when a request cannot be served due to the application’s rate limit having been exhausted for the resource. See <a href="https://developer.twitter.com/en/docs/basics/rate-limiting.html">Rate Limiting</a>.&nbsp;</li><li>500: Internal Server Error -- Something is broken. This is usually a temporary error, for example in a high load situation or if an endpoint is temporarily having issues. Check in the <a href="https://twittercommunity.com/">developer forums</a> in case others are having similar issues, or try again later.&nbsp;</li><li>502: Bad Gateway: Twitter is down, or being upgraded.&nbsp;</li><li>503: Service Unavailable: The Twitter servers are up, but overloaded with requests. Try again later.&nbsp;</li><li>504: Gateway timeout" The Twitter servers are up, but the request couldn’t be serviced due to some failure within the internal stack. Try again later.&nbsp;</li></ul><br />... Um, they have a 420 Error Status? <a href="http://www.snopes.com/language/stories/420.asp">I wonder what that means</a>?<br /><br />There are also numerous error codes:&nbsp;<a href="https://developer.twitter.com/en/docs/basics/response-codes" target="_blank">https://developer.twitter.com/en/docs/basics/response-codes</a><br /><ul><li>32: Could not authenticate you: Corresponds with HTTP 401. There was an issue with the authentication data for the request.&nbsp;</li><li>34: Sorry, that page does not exist: Corresponds with HTTP 404. The specified resource was not found.&nbsp;</li><li>36: You cannot report yourself for spam. Corresponds with HTTP 403. You cannot use your own user ID in a report spam call.&nbsp;</li><li>44: attachment_url parameter is invalid: Corresponds with HTTP 400. The URL value provided is not a URL that can be attached to this Tweet.&nbsp;</li><li>50: User not found. Corresponds with HTTP 404. The user is not found.&nbsp;</li><li>63: User has been suspended. The user account has been suspended and information cannot be retrieved.&nbsp;</li></ul><br />Next time, we will walkthrough setting up a sample project with Twitter4J using IntelliJ.<br /><br />One more time... <a href="http://www.tjmaher.com/2017/10/tinkering-with-twitter-2_29.html" target="_blank">How do you get credentials for Twitter and set up the Twitter4J properties file</a>?</div></div><div><br /><br /><br />Happy Testing! <br /><br /><br> <div><div class="toc-section" id="toc-section"><b>Tinkering With Twitter</b><br /><ul><li><b>Part One</b>: <a href="http://www.tjmaher.com/2017/10/tinkering-with-twitter-1.html" target="_blank">Twitter and the Twitter Search API</a></li><li><b>Part Two</b>: <a href="http://www.tjmaher.com/2017/10/tinkering-with-twitter-2_29.html" target="_blank">Getting the Twitter credentials: Consumer Keys and Access Tokens</a></li><li><b>Part Three: </b><a href="http://www.tjmaher.com/2017/11/tinkering-with-twitter-3.html" target="_blank">Setting up an API Testing Environment with Twitter4J</a></li><li><b>Part Four:</b> <a href="http://www.tjmaher.com/2017/11/tinkering-with-twitter-4.html" target="_blank">Post a Tweet Using Twitter4J To Interact With the Twitter API</a></li><li><b>GitHub</b>: <a href="https://github.com/tjmaher/tinkeringWithTwitter/" target="_blank">Review the source code for the project</a>.</li></ul></div></div> <br><br>-T.J. Maher<br /><a href="https://twitter.com/tjmaher1" style="color: #1155cc;" target="_blank">Twitter</a>&nbsp;|&nbsp;<a href="https://www.linkedin.com/in/tjmaher1" style="color: #1155cc;" target="_blank">LinkedIn</a>&nbsp;|&nbsp;<a href="https://github.com/tjmaher" style="color: #1155cc;" target="_blank">GitHub</a><br /><br /><i>// Sr. QA Engineer, Software Engineer in Test, Software Tester since 1996.<br />// Contributing Writer for&nbsp;<a href="http://techbeacon.com/contributors/thomas-maher" style="color: #1155cc;" target="_blank">TechBeacon.</a><br />// "Looking to move away from manual QA?&nbsp;Follow&nbsp;<a href="http://www.tjmaher.com/" style="color: #1155cc;" target="_blank">Adventures in Automation</a>&nbsp;on <a href="https://www.facebook.com/AdventuresInAutomation/" target="_blank">Facebook</a>!"</i></div></div></div></div>