---
layout: post
title: Starting a Linux Machine with Amazon Web Services Free Tier
date: '2018-01-28T07:00:00.000-05:00'
author: T.J. Maher
tags:
- DevOps
- aws
modified_time: '2018-01-28T08:42:02.977-05:00'
thumbnail: https://1.bp.blogspot.com/-plEeunJZYeM/Wmy1OY9AFKI/AAAAAAAAMQY/GfjdN3dkAwUt-hQsaPq0urqKB49U30EVwCLcBGAs/s72-c/instance.png
blogger_id: tag:blogger.com,1999:blog-3868566217808655382.post-6673402858253828116
blogger_orig_url: http://www.tjmaher.com/2018/01/starting-linux-machine-with-amazon-web.html
---

It's my first time working at a&nbsp;<a href="http://threatstack.com/" target="_blank">cloud-security company</a>&nbsp;using <b>Amazon Web Services</b> (AWS)! How to get up to speed?<br /><br />To get up to speed, first, I've attempted to decipher the AWS Alphabet Soup <a href="http://www.tjmaher.com/2018/01/the-aws-alphabet-soup.html" target="_blank">in an earlier blog post</a>. Next, to get more exposure to AWS, I signed up for the&nbsp;<a href="https://aws.amazon.com/free/" target="_blank">AWS Free Tier</a>. I was a bit leery, since I needed to punch in my credit card information when I signed up.<br /><ul><li>Some AWS services are free for 12 months, provided I do not go over 750 hrs per month of usage of EC2, and over 5 GB of Storage in Amazon EFS or 30 GB of Elastic Block Storage for long term. If I go over, or accidentally use a service that isn't on the free tier, I worry I am going to rack up a huge charge.</li><li><a href="https://aws.amazon.com/free/#legal" target="_blank">Some services seem to be always free.</a>&nbsp;</li></ul>Luckily, I didn't have to look far in order to find help!<br /><ul><li><a href="https://aws.amazon.com/getting-started" target="_blank">Getting Started Resource Center</a>: Mentioned in the email received upon sign up.</li><li><a href="https://aws.amazon.com/documentation/" target="_blank">AWS Documentation</a>&nbsp;</li><li>AWS&nbsp;<a href="https://aws.amazon.com/getting-started/tutorials/" target="_blank">10 Minute Tutorials</a>&nbsp;on everything that you could think of!</li></ul><br /><h2><a name='more'></a><br />Launch a Linux Virtual Machine</h2><br />The first Ten Minute Tutorial I did was <a href="https://aws.amazon.com/getting-started/tutorials/launch-a-virtual-machine/" target="_blank">Launch a Linux Virtual Machine with EC2</a> (Amazon Elastic Compute Cloud). It covered:<br /><br />1) Launching an Instance from the Amazon EC2 console<br /><br />2) Selecting a Free Tier available Amazon Machine Image (AMI) of a Linux Machine to run, such as:<br /><br /><ul><li><b>Amazon Linux AMI 2017.09.1</b> (HVM), SSD Volume Type: "The Amazon Linux AMI is an EBS-backed, AWS-supported image. The default image includes AWS command line tools, Python, Ruby, Perl, and Java. The repositories include Docker, PHP, MySQL, PostgreSQL, and other packages".</li><li><b>SUSE Linux Enterprise Server 12 SP3</b> (HVM), SSD Volume Type: "SUSE Linux Enterprise Server 12 Service Pack 3 (HVM), EBS General Purpose (SSD) Volume Type. Public Cloud, Advanced Systems Management, Web and Scripting, and Legacy modules enabled".</li><li><b>Red Hat Enterprise Linux 7.4</b> (HVM), SSD Volume Type: "Red Hat Enterprise Linux version 7.4 (HVM), EBS General Purpose (SSD) Volume Type"</li><li><b>Ubuntu Server 16.04 LTS (HVM)</b>, SSD Volume Type: "Ubuntu Server 16.04 LTS (HVM),EBS General Purpose (SSD) Volume Type. Support available from Canonical (http://www.ubuntu.com/cloud/services)</li></ul><br /><br />I picked the&nbsp;<b>Amazon Linux AMI</b>.<br /><br />3) Choose an Instance Type<br /><br />Only the General Purpose t2.micro was available on the Free Tier: (Variable ECUs, 1 vCPUs, 2.5 GHz, Intel Xeon Family, 1 GiB memory, EBS only).<br /><br />4) Review and Launch: Sure you could add more storage, tags, and security groups, but instead, I pressed the shiny "Review and Launch" button.<br /><br />Next, all we need to do is set up a key pair!<br /><br /><h2>What does ECU, vCPU, GiB, Instance Storage, EBS Optimized and IPv6 mean?</h2><br />"<b>General purpose instances</b> provide a balance of compute, memory, and network resources, and are a good choice for many applications. They are recommended for small and medium databases, data processing tasks that require additional memory, caching fleets, and for running backend servers for SAP, Microsoft SharePoint, and other enterprise applications"<br /><br />"<b>T2</b> instances provide a baseline level of CPU performance with the ability to burst above the baseline.The baseline and ability to burst are governed by CPU Credits. The t2.micro receives CPU Credits continuously at a rate of 6 CPU Credits per hour. To learn more about Amazon EC2 T2 instances, see the <a href="https://aws.amazon.com/ec2/instance-types/">Amazon EC2 details page</a>". Comes in sized nano, micro, small, medium, large xlarge, 2xlarge.<br /><br /><b>vCPU</b>: "The number of virtual CPUs for the instance".<br /><div><br /></div><div><b>Memory </b>is recorded, in <b>GiB</b> (Gibibytes,&nbsp;1073.741824 Megabytes) -- not GB (Gigabytes, 1024 Megabytes).&nbsp;</div><div><br /></div><div><b>Storage </b>in the AWS Free&nbsp;Tier is offered in <b>EBS&nbsp;</b>-- the <a href="https://aws.amazon.com/ebs/" target="_blank">Amazon Elastic Block Store</a> volume. EBS is for longer term data storage.&nbsp;</div><div><br /></div><div><a href="https://en.wikipedia.org/wiki/Block-level_storage" target="_blank">According to Wikipedia</a>, "Block-level storage is a concept in cloud-hosted data persistence where cloud services emulate the behaviour of a traditional block device, such as a physical hard drive [...] This emulates the type of behaviour seen in traditional disk or tape storage. Blocks are identified by an arbitrary and assigned identifier by which they may be stored and retrieved, but this has no obvious meaning in terms of files or documents.<br /><div><br /></div><div>"Amazon EBS (Elastic Block Store) is an example of a cloud block store. [...] Block-level storage is in contrast to an object store or 'bucket store', such as Amazon S3 (Simple Storage Service), or to a database".&nbsp;</div><br /><b>IPv6 support</b>: Internet Protocol - Version 6:</div><ul><li>IPv4 address format: 24.128.21.12</li><li>IPv6 address format: 2001:CDBA:0000:0000:0000:0000:3257:9652</li></ul>Only 23% of all networks use this "new" 20 year old format for IP addresses, according to the Internet Society's&nbsp;<a href="https://www.internetsociety.org/resources/doc/2017/state-of-ipv6-deployment-2017/" target="_blank">State of IPv6 Deployment 2017</a>.<br /><br /><div><h2></h2><h2>Why a Gibibyte?</h2><div><b><br /></b><b>Gibibyte</b>: Back in 2007 there was a class-action suit "<a href="https://www.cnet.com/news/gigabytes-vs-gibibytes-class-action-suit-nears-end/" target="_blank">against Kodak, Sandisk, Lexar Media</a>, and other memory card makers alleges that the defendants intentionally misrepresented the capacity of their flash memory devices by using decimal definitions, in which a megabyte is 1,000,000 bytes. The suit says a binary definition is appropriate, meaning that one megabyte equals 1,048,576 bytes and that the memory card sizes were overstated by 4 percent to 5 percent".<br /><br />It doesn't matter much in small amounts, according to CNet's&nbsp;<a href="https://www.cnet.com/news/gigabytes-vs-gibibytes-class-action-suit-nears-end/" target="_blank">Gigabytes vs. gibibytes class action suit nears end</a>. "A decimal kilobyte, at 10^3=1,000 wasn't very different from 2^10=1,024".</div><div><br />The problem is when you get into the Gigabyte realm: "But as capacity grows, the differences become more significant (technically, the ratio between the decimal and binary representations increases). This explains why your new terabyte drive isn't as capacious as you hoped it might be. A 10^12=1,000,000,000,000 decimal terabyte is roughly 10 percent smaller than the binary equivalent of 2^40=1,099,511,627,776". <br /><br />"[...] There actually are terms that avoid all this confusion, and those include IEEE 1541 terms <a href="http://en.wikipedia.org/wiki/Gibibyte">gibibyte</a> (2^30 bytes = 1,073,741,824 bytes) and <a href="http://en.wikipedia.org/wiki/Tebibyte">tebibyte</a> (2^40bytes = 1,099,511,627,776 bytes, or 1,024 gibibytes)".<br /><br />Need even more information? The&nbsp;<a href="https://www.ieee.org/" target="_blank">Institute of Electrical and Electronics Engineers</a>, founded back in 1965, handles these types of problems. Read IEEE 1541: <a href="http://www.ieee802.org/secmail/pdf00106.pdf">Standard for Prefixes for Binary Multiples</a>, which talks about the Gibibyte.</div><div><h2><br />Let's Get Back to Key Pairs!&nbsp;</h2>Going back to the <a href="https://aws.amazon.com/getting-started/tutorials/launch-a-virtual-machine/" target="_blank">Linux Virtual Machine Ten Minute Tutorial</a>: "A key pair is used to securely access your Linux instance using SSH. AWS stores the public part of the key pair which is just like a house lock. You download and use the private part of the key pair which is just like a house key.<br /><br />"Select Create a new key pair and give it the name MyKeyPair. Next click the Download Key Pair button.<br /><br />"After you download the MyKeyPair key, you will want to store your key in a secure location. If you lose your key, you won't be able to access your instance. If someone else gets access to your key, they will be able to access your instance.<br /><br />"Windows users: We recommend saving your key pair in your user directory in a sub-directory called .ssh (ex. C:\user\{yourusername}\.ssh\MyKeyPair.pem). Tip: You can't use Windows Explorer to create a folder with a name that begins with a period unless you also end the folder name with a period. After you enter the name (.ssh.), the final period is removed automatically".</div><div><br /></div><div><br /></div><h2>What is a PEM Format?</h2><br />From Quovadisglobal.com / Support, <a href="https://support.quovadisglobal.com/kb/a37/what-is-pem-format.aspx" target="_blank">What is PEM Format?</a> <br /><br /><br />"PEM or Privacy Enhanced Mail is a Base64 encoded DER certificate.  PEM certificates are frequently used for web servers as they can easily be translated into readable data using a simple text editor.  Generally when a PEM encoded file is opened in a text editor, it contains very distinct headers and footers.  Below are some examples of different files in PEM format.<br /><br />-----BEGIN CERTIFICATE REQUEST-----<br />MIIB9TCCAWACAQAwgbgxGTAXBgNVBAoMEFF1b1ZhZGlzIExpbWl0ZWQxHDAaBgNV<br />BAsME0RvY3VtZW50IERlcGFydG1lbnQxOTA3BgNVBAMMMFdoeSBhcmUgeW91IGRl<br />Y29kaW5nIG1lPyAgVGhpcyBpcyBvbmx5IGEgdGVzdCEhITERMA8GA1UEBwwISGFt<br />aWx0b24xETAPBgNVBAgMCFBlbWJyb2tlMQswCQYDVQQGEwJCTTEPMA0GCSqGSIb3<br />DQEJARYAMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCJ9WRanG/fUvcfKiGl<br />EL4aRLjGt537mZ28UU9/3eiJeJznNSOuNLnF+hmabAu7H0LT4K7EdqfF+XUZW/2j<br />RKRYcvOUDGF9A7OjW7UfKk1In3+6QDCi7X34RE161jqoaJjrm/T18TOKcgkkhRzE<br />apQnIDm0Ea/HVzX/PiSOGuertwIDAQABMAsGCSqGSIb3DQEBBQOBgQBzMJdAV4QP<br />Awel8LzGx5uMOshezF/KfP67wJ93UW+N7zXY6AwPgoLj4Kjw+WtU684JL8Dtr9FX<br />ozakE+8p06BpxegR4BR3FMHf6p+0jQxUEAkAyb/mVgm66TyghDGC6/YkiKoZptXQ<br />98TwDIK/39WEB/V607As+KoYazQG8drorw==<br />-----END CERTIFICATE REQUEST-----<br /><br />"Above is the example of a CSR (certificate signing request) in PEM format.  You can see that PEM has the characteristics of containing a header, the body (which consists mainly of code) and footer".<br /><br /><div>After you set up your key pair and download it to your hard drive, you can <b>Launch the Virtual Machine</b>!<br /><br /><h2>How to Launch Your Instances!</h2><br />From Amazon: "Your instances are launching, and it may take a few minutes until they are in the running state, when they will be ready for you to use. Usage hours on your new instances will start immediately and continue to accrue until you stop or terminate your instances.</div><div><br />"Click <b>View Instances</b> to monitor your instances' status. Once your instances are in the running state, you can connect to them from the Instances screen. <a href="https://docs.aws.amazon.com/console/ec2/instances/connect/docs">Find out</a> how to connect to your instances.<br /><br />"Here are some helpful resources to get you started<br /><ul><li>"<a href="https://docs.aws.amazon.com/console/ec2/instances/connect/docs">How to connect to your Linux instance</a></li><li>"<a href="https://aws.amazon.com/free/">Learn about AWS Free Usage Tier</a> </li><li>"<a href="https://docs.aws.amazon.com/console/ec2/launchinstance/status/user-guide">Amazon EC2: User Guide</a></li><li>"<a href="https://forums.aws.amazon.com/forum.jspa?forumID=30">Amazon EC2: Discussion Forum</a></li><li>"While your instances are launching you can also</li><li>"Create status check alarms to be notified when these instances fail status checks. (Additional charges may apply)</li><li>"<a href="https://us-west-2.console.aws.amazon.com/ec2/v2/home?region=us-west-2#Volumes:">Create and attach additional EBS volumes</a> (Additional charges may apply)</li><li>"<a href="https://us-west-2.console.aws.amazon.com/ec2/v2/home?region=us-west-2#SecurityGroups:">Manage security groups</a>"</li></ul><br />... Oh, I made sure to set up to receive billing reports right away!<br /><h2><br />We Have Running Machine!</h2></div><div>Yes! We have a running machine! You can see it in the EC2 Dashboard:</div><div><br /></div><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="https://1.bp.blogspot.com/-plEeunJZYeM/Wmy1OY9AFKI/AAAAAAAAMQY/GfjdN3dkAwUt-hQsaPq0urqKB49U30EVwCLcBGAs/s1600/instance.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" data-original-height="388" data-original-width="1499" height="163" src="https://1.bp.blogspot.com/-plEeunJZYeM/Wmy1OY9AFKI/AAAAAAAAMQY/GfjdN3dkAwUt-hQsaPq0urqKB49U30EVwCLcBGAs/s640/instance.png" width="640" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;"><i>The EC2 Dashboard, with my Instance ID and IPv4 address blocked out.&nbsp;</i></td></tr></tbody></table><div><br /></div><h2><br />How to Connect to Your Instance</h2><div>1) Download Git for Windows, if a Windows User:</div><div><br /></div><div>For <b>Windows</b> Users, they recommend using <a href="https://git-scm.com/download" target="_blank">Git for Windows</a>. For Macs, they recommend the <b>Mac Terminal</b>. Although I am using a Windows 10 machine at home, I decided I wanted it installed on the Command Prompt.&nbsp;</div><div><br /></div><div>2) Connect via SSH to the Machine</div><div><br /></div><div>I <a href="https://aws.amazon.com/getting-started/tutorials/launch-a-virtual-machine/" target="_blank">followed the AWS instructions</a>:</div><br />"Right click on your Windows desktop (not on an icon or file) and select <b>Git Bash Here</b> to open a Git Bash command prompt".</div><div><br /></div><div>Since the fake IP addrerss I am using in this example is "ec-5678", what I entered in the command prompt looked something like...<br /><br /><div>$ ssh -i 'd:\Users\tmaher\.ssh\tjmaher.pem' ec2-user@ec2-5678.us-west-2.compute.amazonaws.com</div><div><br /></div><div><br /></div><div>3) Bask in Glory!<br /><br />The Following text appeared in the command line:<br /><br /></div><div><pre>Warning: Permanently added <br />'ec2-5678.us-west-2.compute.amazonaws.com,11.222.88.99' (ECDSA) <br />to the list of known hosts.<br /><br />       __|  __|_  )<br />       _|  (     /   Amazon Linux AMI<br />      ___|\___|___|<br /><br />https://aws.amazon.com/amazon-linux-ami/2017.09-release-notes/<br />1 package(s) needed for security, out of 1 available<br />Run "sudo yum update" to apply all updates.<br />[ec2-user@ip-12345 ~]$<br /></pre></div><div><br /></div><div><h2>Destroy Your Servers!</h2></div><div>If experimenting with AWS, do what a co-worker told me to do: Write this down on a Post-It Note and post it where you can see it:<br /><br /><ul><li>Destroy Your Servers</li></ul><div>If you do not remember to destroy your servers when you get done with them, you might get charged!</div><br />"Back on the EC2 Console, select the box next to the instance you created.  Then click the Actions button, navigate to <i>Instance State</i>, and click Terminate".<br /><br /><div>One thing... do you have anything you want saved on the instance? If you are using just EBS, [...O]n an EBS-backed instance, the default action is for the root EBS volume to be deleted when the instance is terminated. Storage on any local drives will be lost".</div><br /><br /><br /><br /><br /><h2>What's Next?</h2><br />What's Next? Who knows! Now you know as much as I do during my second week of my job!<br /><br />Happy Testing! <br /><br />-T.J. Maher<br />Sr. QA Engineer, Software Engineer in Test<br />Meetup Organizer, <a href="http://bit.ly/mot_boston" target="_blank">Ministry of Testing - Boston</a><br /><br /><a href="https://twitter.com/tjmaher1">Twitter</a>&nbsp;| <a href="http://bit.ly/tj_youtube" target="_blank">YouTube</a> |&nbsp;<a href="https://www.linkedin.com/in/tjmaher1" target="_blank">LinkedIn</a>&nbsp;| <a href="http://bit.ly/tj_techbeacon" target="_blank">Articles</a></div></div>