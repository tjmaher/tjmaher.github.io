---
layout: post
title: 'Learning Appium Desktop: Inspecting an app with Appium Desktop'
date: '2017-04-25T08:57:00.000-04:00'
author: T.J. Maher
tags:
- appium
modified_time: '2017-04-25T09:02:43.138-04:00'
thumbnail: https://2.bp.blogspot.com/-prLNYAWBjKg/WPMjdZlFU3I/AAAAAAAALvE/tmKyBcpqyA8PLdmvlkiExGzVfIV55ddXwCLcB/s72-c/Screen%2BShot%2B2017-04-16%2Bat%2B3.52.25%2BAM.png
blogger_id: tag:blogger.com,1999:blog-3868566217808655382.post-1102155347783631313
blogger_orig_url: http://www.tjmaher.com/2017/04/learning-appium-inspecting-app-with.html
---

<i>This is Part 6 of 6. Care to&nbsp;<a href="http://www.tjmaher.com/2017/04/learning-appium-what-is-appium-server.html">go back to the beginning</a>?</i><br /><i><br /></i>So far we have:<br /><ul><li>Learned <a href="http://www.tjmaher.com/2017/04/learning-appium-what-is-appium-server.html">how to install Appium Desktop</a> which bundles Appium with an inspector we can use to inspect our applications.&nbsp;</li><li>Studied how to connect an Android device via USB through the Android Command Line tool adb.</li><li>Connected to the device via WiFi.&nbsp;</li><li>Learned how to set up an emulated Android device.</li></ul><br />With this blog post we are going to:<br /><ul><li>Inspect an app with Appium Desktop&nbsp;</li><li>Before we need to do that, we need to find an app's Desired Capabilities!</li></ul><div><br /><a name='more'></a><br /></div><h3>What are Desired Capabilities?</h3><br />Taken from <a href="http://appium.io/slate/en/master/?java#appium-concepts">http://appium.io/slate/en/master/?java#appium-concepts</a><br /><br />"Desired capabilities are a set of keys and values (i.e., a map or hash) sent to the Appium server to tell the server what kind of automation session we’re interested in starting up. There are also various capabilities which can modify the behavior of the server during automation. For example, we might set the platformName capability to iOS to tell Appium that we want an iOS session, rather than an Android or Windows one. Or we might set the safariAllowPopups capability to true in order to ensure that, during a Safari automation session, we’re allowed to use JavaScript to open up new windows. See the <a href="http://appium.io/slate/en/master/?java#caps.md">capabilities doc</a> for the complete list of capabilities available for Appium".<br /><br /><h3>How to Set Up Android Desktop?</h3><br /><b>Step One</b>: Check to see if there are any Android devices running. If not, start an emulator or an actual Android device<br /><ul><li>My Samsung Galaxy S7 Edge that already has Developer Options turned on. I connected it to my MacBook via USB.&nbsp;</li><li>On the Mac Terminal, enter: avd devices&nbsp;</li><li>It showed that in the list of devices attached, there was device: 412327b5&nbsp;</li></ul><b>Step Two:</b>&nbsp;On the Android device or emulator, run the app you want to inspect.<br /><ul><li>Okay! Let's run the Calculator app!</li></ul><b><br />Step Three:</b>&nbsp;Run the app on the device and find the appPackage and appActivity.<br /><ul><li>Let's say the magic words to take all the system properties on the device, grab just what is running in the current window on the app, what is in focus, and dump those properties onto the screen.&nbsp;</li><li>This will be a call to the adb shell, i.e. the device that is connected to adb.&nbsp;</li><li>Type in the Mac Terminal: adb shell "dumpsys window windows | grep -E 'mCurrentFocus | mFocusedApp'"&nbsp;</li></ul><br /><pre style="background: rgb(240, 240, 240); border: 1px dashed rgb(204, 204, 204); font-family: arial; font-size: 12px; height: auto; line-height: 20px; overflow: auto; padding: 0px; width: 646.469px;"><code style="word-wrap: normal;"> $adb shell "dumpsys window windows | grep -E 'mCurrentFocus | mFocusedApp'"  <br />   <br />mFocusedApp=AppWindowToken{d0d077a06 <br />token = Token { fc44ce1 ActivityRecord{4158648 u0 <br />com.sec.android.app.popupcalculator/.Calculator t352}}}  </code></pre><br /><ul><li>This shows that the appPackage is&nbsp;<i>com.sec.android.app.popupcalculator</i></li><li>This also shows that the appActivity is&nbsp;<i>.Calculator</i></li></ul><br /><b>Step Four</b>: Start up Android Desktop<br /><ul><li>Click on the Appium Desktop icon</li><li>Leaving everything at default, let's select: Start Server v1.6.4 on the main page</li><li>Once we see the server is running, let's: Start New Session</li><li>Now we see that the desired capabilities are showing.</li></ul><br /><b>Step Five:</b>&nbsp;Enter Desired Capabilities and Save Them<br /><ul><li>platformName: Android</li><li>deviceName: 412327b5</li><li>appPackage:&nbsp;com.sec.android.app.popupcalculator</li><li>appActivity:&nbsp;.Calculator</li></ul><br />Let's select "Save As..." and save it as "Calculator".<br /><br /><b>Step Six</b>: Start the New Session!<br /><ul><li>Select: Start Session</li></ul><table cellpadding="0" cellspacing="0" class="tr-caption-container" style="float: left; margin-right: 1em;"><tbody><tr><td style="text-align: center;"><a href="https://2.bp.blogspot.com/-prLNYAWBjKg/WPMjdZlFU3I/AAAAAAAALvE/tmKyBcpqyA8PLdmvlkiExGzVfIV55ddXwCLcB/s1600/Screen%2BShot%2B2017-04-16%2Bat%2B3.52.25%2BAM.png" imageanchor="1" style="clear: left; margin-bottom: 1em; margin-left: auto; margin-right: auto;"><img border="0" height="332" src="https://2.bp.blogspot.com/-prLNYAWBjKg/WPMjdZlFU3I/AAAAAAAALvE/tmKyBcpqyA8PLdmvlkiExGzVfIV55ddXwCLcB/s640/Screen%2BShot%2B2017-04-16%2Bat%2B3.52.25%2BAM.png" width="640" /></a></td></tr><tr><td class="tr-caption" style="font-size: 12.8px; text-align: center;"><i>It's Alive!!!!</i></td></tr></tbody></table><br /><br />Now that we have everything working, we can start using Appium Desktop to start inspecting how to interact with this app!<br /><br /><h3>Appium Desktop: Like FireBug, or Google Chrome -&gt; Inspect, but for Apps!</h3><div>Before automating, whether it is for a web or a mobile application, you need to try to figure out how you are going to interact with the various elements on the page and the screen. How can you identify one particular username textbox, and send text to it? How can you identify a Login button?&nbsp;</div><div><br /></div><div>With the Firefox browser, you could download <a href="http://getfirebug.com/">Firebug</a> and <a href="https://addons.mozilla.org/en-US/firefox/addon/firepath/">Firepath</a> to see the inner workings of the DOM (Document Object Model).</div><div><br /></div><div>With the Chrome browser, you could right-click and Inspect, to <a href="https://developers.google.com/web/tools/chrome-devtools/inspect-styles/">examine a site with Google Developers Tools</a>.&nbsp;</div><br />With mobile apps, Google Android Developers used to provide a <a href="http://www.guru99.com/uiautomatorviewer-tutorial.html" target="_blank">UiAutomatorViewer.</a><br /><h3><br />Appium Desktop: A Tool in Three Parts</h3>Appium Desktop has three panes:<br /><br /><b><u>Left pane:</u></b><br /><ul><li>Reflection of the actual device or the emulator you are running.&nbsp;</li><li>You can attempt to manipulate what is there in the leftmost pane, to see what will happen. Select an object, then select "Tap" in the rightmost pane.&nbsp;</li><li>You can move from screen to screen on your running emulator or actual device, and select the "Refresh" button on the center screen.</li></ul><b><u>Center pane:&nbsp;</u></b><br /><ul><li>Displays the App Source code in an XML format, exactly as shown when navigating the DOM of a web page.&nbsp;</li><li><b>Back</b>: On the very top of the center pane, you can choose to manipulate the reflection in the left pane by choosing the "Back" button.&nbsp;</li><li>&nbsp;<b>Refresh</b>: Want to examine another screen? Go to the screen in your app or emulator. After selecting "Refresh", the screen image will appear within three seconds.</li><li><b>Quit</b>: Closes this three paned view and goes back to the Desired Capabilities page.</li></ul><br /><b><u>Right Pane:</u>&nbsp;</b><br /><ul><li><b>Tap</b>: Interact with whatever object you have selected in the leftmost pane.&nbsp;</li><li><b>Send Keys</b>: Want to enter text into a textbox selected on the leftmost pane? Select the object, press "Send Keys" and type up text into the popup window.</li></ul><div>The right pane is the one that is the most useful. Select an object in the left pane, and it will tell you how to find it, either by XPath, Id, or Class Name. It will also say exactly what locator to use in an automation test suite.</div><div><br /></div><h3>Different Locating Strategies</h3><i>"Appium is built to implement the Selenium WebDriver JSON Wire Protocol <a href="https://code.google.com/p/selenium/wiki/JsonWireProtocol">specification</a>, extended to enable the automation of mobile devices. By and large, the extensions to the WebDriver spec are encoded within the draft Mobile JSON Wire Protocol <a href="https://github.com/SeleniumHQ/mobile-spec/blob/master/spec-draft.md">spec</a>. In order to find elements in a mobile environment, Appium implements a number of locator strategies that are specific to, or adaptations for, the particulars of a mobile device. Three are available for both Android and iOS." - SauceLabs, <a href="https://saucelabs.com/blog/advanced-locator-strategies" target="_blank">Advanced Locator Strategies</a></i><u style="font-weight: bold;"><br /></u><u style="font-weight: bold;">XPath:</u>&nbsp;Unfortunately, XPath may be the most common way to find a mobile object. If the developers of the mobile app did not tag each and every mobile object, such as tagging a username textbox with the id = 'textbox', you may be dealing with this long string of backslashes.<br /><blockquote class="tr_bq"><i>"XPath is defined as XML path. It is a syntax or language for finding any element on the web page using XML path expression. XPath is used to find the location of any element on a webpage using HTML DOM structure". - Guru99's <a href="http://www.guru99.com/xpath-selenium.html" target="_blank">section on XPath</a></i></blockquote>XPath = //tagName[@Attribute='Value']<br /><br />If you follow along with <a href="http://www.guru99.com/xpath-selenium.html" target="_blank">Guru99's section on XPath</a>, you can find out there are both <b>Absolute XPath </b>which traverses the entire DOM searching for an element.<br /><br /><pre style="background-color: whitesmoke; border-radius: 4px; border: 1px solid rgba(0, 0, 0, 0.14902); color: #333333; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; line-height: 20px; margin-bottom: 10px; padding: 9.5px; white-space: pre-wrap; word-break: break-all; word-wrap: break-word;">html/body/div[1]/section/div[1]/div/div/div/div[1]/div/div/div/div/div[3]/div[1]/div/h4[1]/b</pre><br /><b>There is also the Relative XPath:</b><br /><br /><pre style="background-color: whitesmoke; border-radius: 4px; border: 1px solid rgba(0, 0, 0, 0.14902); color: #333333; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; line-height: 20px; margin-bottom: 10px; padding: 9.5px; white-space: pre-wrap; word-break: break-all; word-wrap: break-word;">Relative xpath: //*[@class='featured-box']//*[text()='Testing']</pre><div><br />... To skip having to deal with either of these, ask the mobile developers on your team to tag all the mobile objects they are working with.<br /><br />Hrm. Convince mobile developers to take on more work where it will mainly help QA? Or somehow learn XPath? I am not sure which way would be easier...<br /><br />XPath can be fragile. If a mobile element is placed higher or lower in the DOM, the XPath will then changes, introducing some brittleness into the automation, since the mobile element will not be found.<br /><br />Having an ID, or a classname (if the class is unique) might be easier.<br /><br /><br /><b><u>Class Name</u></b><br /><i><br />"The class name strategy is a string representing a UI element on the current view. For iOS it is the full name of a <a href="https://developer.apple.com/library/prerelease/tvos/documentation/DeveloperTools/Conceptual/InstrumentsUserGuide/UIAutomation.html">UIAutomation</a> <a href="https://developer.apple.com/library/ios/navigation/#section=Frameworks&amp;topic=UIAutomation">class</a>, and will begin with UIA-, such as UIATextField for a text field. A full reference can be found <a href="https://developer.apple.com/library/ios/navigation/#section=Frameworks&amp;topic=UIAutomation">here</a>. For Android it is the fully qualified name of a <a href="https://developer.android.com/tools/testing-support-library/index.html#UIAutomator">UI Automator</a> <a href="https://developer.android.com/reference/android/widget/package-summary.html">class</a>, such android.widget.EditTextfor a text field. A full reference can be found <a href="https://developer.android.com/reference/android/widget/package-summary.html">here</a>. The client libraries for Appium support getting a single element, or multiple elements, based on the class name".&nbsp;</i><i>- SauceLabs,&nbsp;<a href="https://saucelabs.com/blog/advanced-locator-strategies" target="_blank">Advanced Locator Strategies</a></i><br /><b><u>Id:</u></b><br /><br /><i>"In the mobile environment, ids are not, as in WebDriver, CSS ids, but rather some form of native identifier.</i><br /><ul><li><i>"For iOS the situation is complicated. Appium will first search for an accessibility id that matches. If there is none found, a string match will be attempted on the element labels. Finally, if the id passed in is a localization key, it will search the localized string.</i></li><li><i>"For Android, the id is the element's android:id".</i></li></ul><i>&nbsp;- SauceLabs,&nbsp;<a href="https://saucelabs.com/blog/advanced-locator-strategies" target="_blank">Advanced Locator Strategies</a></i><br /><br /><br />This concludes our "Learning Appium Desktop" series for now! Within the next couple of weeks we will start:<br /><br /><ul><li>Learning Appium Desktop for the IOS</li><li>A Coding Project in Appium</li></ul><br /><br /><br /><div class="toc-section" id="toc-section"><b>Learning Appium Desktop</b><br /><ul><li><b>Part One:</b>&nbsp;<a href="http://www.tjmaher.com/2017/04/learning-appium-what-is-appium-server.html">What is Appium Server and How Do You Start It With Appium Desktop</a></li><li><b>Part Two:</b>&nbsp; <a href="http://www.tjmaher.com/2017/04/learning-appium-desktop-how-to-connect.html">How to Connect To Your Android Device Using the Android SDK, the Android Command Line Tools, and the Android Debug Bridge</a></li><li><b>Part Three:</b>&nbsp; <a href="http://www.tjmaher.com/2017/04/learning-appium-desktop-setting-up_18.html">Setting up remote devices through WiFi </a></li><li><b>Part Four:</b>&nbsp; <a href="http://www.tjmaher.com/2017/04/learning-appium-desktop-setting-up.html" target="_blank">Setting up Android Emulators with Android Virtual Device Manager (avd), choosing the Android operating system version</a></li><li><b>Part Five:</b>&nbsp;&nbsp;<a href="http://www.tjmaher.com/2017/04/learning-appium-desktop-find-desired.html" target="_blank">Find the Desired Capabilities: appPackage and appActivity. Bug in AAPT if giving just appName</a></li><li><b>Part Six:</b>&nbsp; <a href="http://www.tjmaher.com/2017/04/learning-appium-inspecting-app-with.html" target="_blank">Inspecting an Android app using Appium Desktop</a></li></ul></div><br /><br />Until then, Happy Testing!<br /><br />-T.J. Maher<br /><a href="https://twitter.com/tjmaher1" style="color: #1155cc;" target="_blank">Twitter</a>&nbsp;|&nbsp;<a href="https://www.linkedin.com/in/tjmaher1" style="color: #1155cc;" target="_blank">LinkedIn</a>&nbsp;|&nbsp;<a href="https://github.com/tjmaher" style="color: #1155cc;" target="_blank">GitHub</a><br /><br /><i>// Sr. QA Engineer, Software Engineer in Test, Software Tester since 1996.<br />// Contributing Writer for&nbsp;<a href="http://techbeacon.com/contributors/thomas-maher" style="color: #1155cc;" target="_blank">TechBeacon.</a><br />// "Looking to move away from manual QA?&nbsp;Follow&nbsp;<a href="http://www.tjmaher.com/" style="color: #1155cc;" target="_blank">Adventures in Automation</a>&nbsp;on <a href="https://www.facebook.com/AdventuresInAutomation/" target="_blank">Facebook</a>!"</i></div>